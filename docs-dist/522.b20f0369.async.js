(self.webpackChunk_iauto_components=self.webpackChunk_iauto_components||[]).push([[522],{16384:function(Sl,rt,p){"use strict";p.r(rt),p.d(rt,{Loading:function(){return ue},Message:function(){return Ce},ModalWithForm:function(){return wn},Navigation:function(){return Nt},NewForm:function(){return Pe},NewTable:function(){return Un},PageContainer:function(){return pl},TableWithForm:function(){return ba},VirtualTable:function(){return Et}});var jl=p(35611),Cn=p(85402),bl=p(13062),dt=p(71230),$l=p(89032),ut=p(15746),wl=p(6516),_t=p(26713),El=p(98541),Ht=p(27049),Al=p(82e3),rn=p(32808),Dl=p(95985),Sn=p(34041),Tl=p(29913),de=p(71577),Fl=p(69463),st=p(79531),Rl=p(54057),jn=p(54398),kt=p(861),De=p.n(kt),Bl=p(14934),He=p(12461),Ut=p(38416),$e=p.n(Ut),Vt=p(18698),ke=p.n(Vt),zt=p(27424),H=p.n(zt),Gt=p(42122),r=p.n(Gt),Jt=p(70215),ct=p.n(Jt),Ol=p(75256),Yt=p(23592),dn=p(73935),c=p(67294),Kt=p(96486),t=p.n(Kt),Oe=p(20057),Nl=p(91750),vt=p(14670),Xt=p(21640),Qt=p(89739),o=p(85893),ft={fontWeight:700,color:"#000",textAlign:"left",fontSize:14,width:"100%"},ht={color:"#888",textAlign:"left",fontSize:14,width:"100%"},bn={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},qt={width:700,backgroundColor:"#f1fbf8",borderColor:"#17b88c",borderRadius:0,borderWidth:1,borderStyle:"solid",padding:"10px 16px"},eo={width:700,backgroundColor:"#fef0f1",borderColor:"#e60012",borderRadius:0,borderWidth:1,borderStyle:"solid",padding:"10px 16px"},no={color:"#17b88c",fontSize:45,marginRight:20},to={color:"#e60012",fontSize:45,marginRight:20},mt={display:"flex",alignItems:"center"},Ce={error:function(e){var a=e.title,l=e.subTitle,d=e.duration,u=d===void 0?1:d;He.ZP.open({icon:null,duration:u,className:"agul-message-content",content:(0,o.jsx)(vt.Z,{style:eo,closable:!0,description:(0,o.jsxs)("div",{style:mt,children:[(0,o.jsx)(Xt.Z,{style:to}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:r()(r()({},ft),bn),children:a}),l?(0,o.jsx)("div",{style:r()(r()({},ht),bn),children:l}):null]})]})})})},success:function(e){var a=e.title,l=e.subTitle,d=e.duration,u=d===void 0?1:d;He.ZP.open({icon:null,duration:u,className:"agul-message-content",content:(0,o.jsx)(vt.Z,{style:qt,description:(0,o.jsxs)("div",{style:mt,children:[(0,o.jsx)(Qt.Z,{style:no}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:r()(r()({},ft),bn),children:a}),l?(0,o.jsx)("div",{style:r()(r()({},ht),bn),children:l}):null]})]})})})}},oo=p(24969),ao=p(86548),gt=p(68795),pt=p(48689),lo=p(23430),io=p(74842),$n=p(77598),yt=p(8879),xt=p(26144),ro=function(e){var a=e.disabled,l=e.readOnly,d=e.value,u=e.onChange,i=e.addons,g=i.dataPath,S=i.setSchemaByPath,m=e.schema,y=t().get(e,"schema.props.placeholder","\u8BF7\u586B\u5165JSON\u683C\u5F0F\u7684\u6570\u636E");(0,c.useEffect)(function(){S(g,r()(r()({},m),{},{rules:[{validator:function(h,b){try{return JSON.stringify(JSON.parse(b),null,"	"),!0}catch(R){return!1}},message:"\u8BF7\u586B\u5165JSON\u683C\u5F0F\u7684\u6570\u636E"}]}))},[]);var F=function(h){u(h)};return(0,o.jsx)("div",{className:"agul-ui-newform-widget-code-editor",children:(0,o.jsx)(xt.ZP,{value:t().isString(d)?d:"",readOnly:!!a||!!l,height:"200px",maxHeight:"400px",width:"100%",className:"code-editor-content",placeholder:y,onChange:F})})},uo=ro,Zl=p(95847),so=p(45239),co=p(17061),Ke=p.n(co),vo=p(17156),In=p.n(vo),fo=p(11238),ho={200:"\u670D\u52A1\u5668\u6210\u529F\u8FD4\u56DE\u8BF7\u6C42\u7684\u6570\u636E\u3002",201:"\u65B0\u5EFA\u6216\u4FEE\u6539\u6570\u636E\u6210\u529F\u3002",202:"\u4E00\u4E2A\u8BF7\u6C42\u5DF2\u7ECF\u8FDB\u5165\u540E\u53F0\u6392\u961F\uFF08\u5F02\u6B65\u4EFB\u52A1\uFF09\u3002",204:"\u5220\u9664\u6570\u636E\u6210\u529F\u3002",400:"\u53D1\u51FA\u7684\u8BF7\u6C42\u6709\u9519\u8BEF\uFF0C\u670D\u52A1\u5668\u6CA1\u6709\u8FDB\u884C\u65B0\u5EFA\u6216\u4FEE\u6539\u6570\u636E\u7684\u64CD\u4F5C\u3002",401:"\u7528\u6237\u6CA1\u6709\u6743\u9650\uFF08\u4EE4\u724C\u3001\u7528\u6237\u540D\u3001\u5BC6\u7801\u9519\u8BEF\uFF09\u3002",403:"\u7528\u6237\u5F97\u5230\u6388\u6743\uFF0C\u4F46\u662F\u8BBF\u95EE\u662F\u88AB\u7981\u6B62\u7684\u3002",404:"\u53D1\u51FA\u7684\u8BF7\u6C42\u9488\u5BF9\u7684\u662F\u4E0D\u5B58\u5728\u7684\u8BB0\u5F55\uFF0C\u670D\u52A1\u5668\u6CA1\u6709\u8FDB\u884C\u64CD\u4F5C\u3002",500:"\u670D\u52A1\u5668\u53D1\u751F\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u670D\u52A1\u5668\u3002",502:"\u7F51\u5173\u9519\u8BEF\u3002",503:"\u670D\u52A1\u4E0D\u53EF\u7528\uFF0C\u670D\u52A1\u5668\u6682\u65F6\u8FC7\u8F7D\u6216\u7EF4\u62A4\u3002",504:"\u7F51\u5173\u8D85\u65F6\u3002"},mo=function(){var s=In()(Ke()().mark(function e(a){var l,d,u,i,g;return Ke()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(l=a.response,(l==null?void 0:l.status)!==500){m.next=10;break}return m.next=4,l.json();case 4:if(d=m.sent,d.error.code!=="business.home.protocol.update.status.err"){m.next=7;break}return m.abrupt("return",d);case 7:Ce.error({title:d==null?void 0:d.error.message}),m.next=11;break;case 10:l!=null&&l.status?(u=ho[l.status]||l.statusText,i=l.status,g=l.url,Ce.error({title:"\u8BF7\u6C42\u9519\u8BEF ".concat(i,": ").concat(g),subTitle:u})):l||Ce.error({title:"\u7F51\u7EDC\u5F02\u5E38",subTitle:"\u60A8\u7684\u7F51\u7EDC\u53D1\u751F\u5F02\u5E38\uFF0C\u65E0\u6CD5\u8FDE\u63A5\u670D\u52A1\u5668"});case 11:throw console.error(a),a;case 13:case"end":return m.stop()}},e)}));return function(a){return s.apply(this,arguments)}}(),Pn=(0,fo.l7)({prefix:"",errorHandler:mo});Pn.interceptors.request.use(function(s,e){return{url:s,options:r()(r()({},e),{},{interceptors:!0})}}),Pn.interceptors.response.use(function(){var s=In()(Ke()().mark(function e(a){return Ke()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",a);case 1:case"end":return d.stop()}},e)}));return function(e){return s.apply(this,arguments)}}());var ce=Pn,Ct=(0,c.createContext)(null),St=(0,c.createContext)(null);function Wn(){var s=c.useContext(Ct);if(s===void 0)throw new Error("\u5FC5\u987B\u5728 globalProvider \u5185\u4F7F\u7528 useGlobalState");return s}function Mn(){var s=c.useContext(St);if(s===void 0)throw new Error("\u5FC5\u987B\u5728 globalProvider \u5185\u4F7F\u7528 useGlobalDispatch");return s}var go=function(e){var a=e.children,l=e.data,d=c.useState(l),u=H()(d,2),i=u[0],g=u[1];return(0,o.jsx)(Ct.Provider,{value:i,children:(0,o.jsx)(St.Provider,{value:g,children:a})})},Ue=(0,c.createContext)(void 0),Il=null,we=(0,c.createContext)(void 0),po={width:"100%",display:"flex"},yo={flexGrow:"1"};function jt(s,e,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return t().forEach(e,function(){for(var d=0;d<s.length;d++){var u=s[d];u.label=t().get(u,e[l]),u.value=t().get(u,a[l]),l<e.length-1&&!t().isEmpty(u.children)?u.children=jt(u.children,e,a,l+1):delete u.children}}),s}var xo=function(e){var a=e.addons.getFieldError,l=e.schema.treeData,d=e.id,u=e.disabled,i=e.onChange,g=e.value,S=e.placeholder,m=(0,c.useState)([]),y=H()(m,2),F=y[0],A=y[1],h=(0,c.useState)(!1),b=H()(h,2),R=b[0],x=b[1],v=(0,c.useContext)(we),D=t().get(v,"requestHeaders",{})||{};(0,c.useEffect)(function(){x(!0),ce(l==null?void 0:l.url,{method:"get",headers:r()({},D)}).then(function(U){x(!1);var B=t().get(U,l==null?void 0:l.path,[]);B&&A(jt(B,l==null?void 0:l.labelFeilds,l==null?void 0:l.valueFeilds))}).catch(function(U){x(!1),console.log(U.message)})},[]);var $=function(B){i(B||void 0)};return(0,o.jsx)("div",{id:"agul-ui-newform-cascader-container",style:po,children:(0,o.jsx)(so.Z,{status:t().isEmpty(a(d))?"":"error",options:F,value:g,onChange:$,style:yo,disabled:u,placeholder:S,loading:R})})},Co=xo,Pl=p(5830),bt=p(45278),So=p(30381),un=p.n(So),Wl=p(7869),jo=8,$t=function(e){this.capacity=e,this.cache=[]};$t.prototype.get=function(s){var e=this.cache.findIndex(function(l){return l.key===s});if(e===-1)return-1;var a=this.cache[e].value;return this.cache.splice(e,1),this.cache.unshift({key:s,value:a}),a},$t.prototype.put=function(s,e){var a=this.cache.findIndex(function(l){return l.key===s});a>-1?this.cache.splice(a,1):this.cache.length>=this.capacity&&this.cache.pop(),this.cache.unshift({key:s,value:e})};var Ml={set:function(e,a){try{sessionStorage.setItem(e,a)}catch(l){return!1}return!0},get:function(e){sessionStorage.getItem(e)},remove:function(e){sessionStorage.removeItem(e)},clear:function(){sessionStorage.clear()}},Xe=function(e){return e?un()(e).utcOffset(jo):""},Ll=function(e){return"\u603B\u5171 ".concat(e," \u4E2A\u9879\u76EE")},_l=function(e){for(var a=JSON.parse(JSON.stringify(e)),l=0,d=Object.keys(a);l<d.length;l++){var u=d[l];(a[u]===null||a[u]==="")&&delete a[u]}return a},Hl=function(e){var a={};e.forEach(function(d){a[d.id]=d});var l=[];return e.forEach(function(d){var u=a[d.parentId];u?((u.children||(u.children=[])).push(d),u.count=(u.count||(u.count=0))+1):l.push(d)}),l},kl=function s(e,a){var l=cloneDeep(e),d=[];return l.forEach(function(u){if(u.key=u.id,u.parentId===a){var i=s(l,u.id);i.length&&(u.children=i),d.push(u)}}),d},bo=function s(e,a,l){var d=cloneDeep(e),u=[],i=l+1;return d.forEach(function(g){if(g.key=g.id,g.level=i,g.parentId===a){var S=s(d,g.id,i);S.length&&(g.children=S),u.push(g)}}),u},Ul=function(e){var a=cloneDeep(e),l=[],d=bo(a,-1,1);return a.forEach(function(u){u.parentId===-2&&l.push(_objectSpread(_objectSpread({},u),{},{key:u.id,children:d,level:1}))}),l},Vl=function s(e,a){e.forEach(function(l){a.push(l),l.children&&s(l.children,a)})},zl=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:FORMAT_DATETIME;return moment(e).isValid()?moment(Xe(e)).format(a):""},Ee=function(e){return e!==void 0?e.toString():""},Gl=function(e){return new Promise(function(a,l){e||l(new Error);var d={serviceInterface_definition:[],dataType_definition:[],service_deployment:[],sd_parameters:[]},u=["server_name","server_id","server_description","service_name_space","service_major_version","service_minor_version","interface_major_version","interface_minor_version","api_name","api_description","service_interface_element_type","service_Interface_element_id","event_group","L4_Protocol","parameter_name","parameter_description","parameter_direction","data_type_reference","remark"],i=["data_type_name","data_type_description","data_type_name_space","data_type_category","struct_union_member_position","struct_union_member_name","struct_union_member_description","struct_union_member_data_type_reference","array_element_data_type_reference","string_array_length_type","string_array_length_min","string_array_length_max","base_type","min_value_physical","max_value_physical","initial_value","invalid_value","unit","table_value","remark"],g=["paticipant","ipv_4","ip_subnet_mask","vlan_id","service_name","service_id","provided_service_instance_id","consumed_service_instance_id","l_4_protocol","port","eventgroups","multicast_ip_port","sd_parameter_configuration"],S=["sd_parameters_name","type","initial_delay_min","initial_delay_max","repetitions_base_delay","reperirions_max","request_response_delay","cyclic_offer_delay","sd_port","sd_multicast_ip","ttl"],m=new FileReader;m.onload=function(y){try{var F,A=y==null||(F=y.target)===null||F===void 0?void 0:F.result,h=XLSX.read(A,{type:"binary"}),b=[],R=["ServiceInterface Definition","DataType Definition","Service Deployment","SD Parameters"];if(b=h.SheetNames,!b.toString().includes(R.toString()))l(new Error("\u6587\u4EF6\u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E,\u8BF7\u68C0\u67E5\u6587\u4EF6!"));else{for(var x in h.Sheets){if(x==="ServiceInterface Definition"){var v=XLSX.utils.sheet_to_json(h.Sheets["ServiceInterface Definition"],{header:u}),D=v.splice(1);D.map(function(f){f.service_major_version=Ee(f.service_major_version),f.service_minor_version=Ee(f.service_minor_version),f.interface_major_version=Ee(f.interface_major_version),f.interface_minor_version=Ee(f.interface_minor_version)}),d.serviceInterface_definition=D}if(x==="DataType Definition"){var $=XLSX.utils.sheet_to_json(h.Sheets["DataType Definition"],{header:i}),U=$.splice(1);d.dataType_definition=U}if(x==="Service Deployment"){var B=XLSX.utils.sheet_to_json(h.Sheets["Service Deployment"],{header:g}),k=B.splice(1);k.map(function(f){f.provided_service_instance_id=Ee(f.provided_service_instance_id),f.port=Ee(f.port)}),d.service_deployment=k}if(x==="SD Parameters"){var L=XLSX.utils.sheet_to_json(h.Sheets["SD Parameters"],{header:S}),W=L.splice(1);W.map(function(f){f.initial_delay_min=Ee(f.initial_delay_min),f.initial_delay_max=Ee(f.initial_delay_max),f.repetitions_base_delay=Ee(f.repetitions_base_delay),f.cyclic_offer_delay=Ee(f.cyclic_offer_delay),f.sd_port=Ee(f.sd_port),f.reperirions_max=Ee(f.reperirions_max),f.ttl=Ee(f.ttl)}),d.sd_parameters=W}}a(d)}}catch(f){console.log(f),l(new Error("\u6587\u4EF6\u7C7B\u578B\u4E0D\u6B63\u786E\uFF01"))}},m.readAsBinaryString(e)})};function Ln(s,e,a){return t().map(s,function(l){return l!=null&&l.children?(l.label=l[e],l.value=l[a],l.children=Ln(l.children,e,a)):(l.label=l[e],l.value=l[a]),l})}function Jl(s){if(!s)return"";var e={},a=[],l="",d="";try{var u=[];if(s.indexOf("?")>=0&&(u=s.substring(s.indexOf("?")+1,s.length).split("&")),u.length>0)for(var i in u)l=(a=u[i].split("="))[0],d=a[1],e[l]=d}catch(g){e={}}return e}function Ne(s){return Object.prototype.toString.call(s)==="[object Object]"}function $o(s){delete s.___agul_ui_time____,t().forEach(s,function(e,a){(t().isNil(e)||e===""||t().isNaN(e))&&delete s[a]})}var _n=(typeof HTMLElement=="undefined"?"undefined":ke()(HTMLElement))==="object"?function(s){return s instanceof HTMLElement}:function(s){return s&&ke()(s)==="object"&&s.nodeType===1&&typeof s.nodeName=="string"},wo=bt.Z.SHOW_CHILD,Eo=function(e){var a=e.onChange,l=e.value,d=e.disabled,u=e.schema,i=u.treeData,g=u.dependencies,S=e.addons,m=S.dependValues,y=m===void 0?[]:m,F=S.isFieldsTouched,A=e.placeholder,h=(0,c.useState)([]),b=H()(h,2),R=b[0],x=b[1],v=(0,c.useContext)(we),D=t().get(v,"requestHeaders",{})||{},$=function(){var B=i!=null&&i.params?i==null?void 0:i.params:{};t().forEach(g,function(k,L){y[L]&&t().set(B,t().last(k.split(".")),y[L])}),ce(i==null?void 0:i.url,{method:"get",params:B,headers:r()({},D)}).then(function(k){var L=t().get(k,i==null?void 0:i.path,[]);L&&x(Ln(L,i==null?void 0:i.labelFeild,i==null?void 0:i.valueFeild))}).catch(function(k){x([])})};return(0,c.useEffect)(function(){$()},[]),(0,$n.Z)(function(){F()&&a(void 0),$()},y),(0,o.jsx)(bt.Z,{disabled:d,treeData:R,value:l,onChange:a,treeCheckable:!0,showCheckedStrategy:wo,placeholder:A,style:{width:"100%"},treeDefaultExpandAll:!0})},Ao=Eo;function Do(s,e){var a={};return t().forEach(e,function(l){a[l]=s[l]}),JSON.stringify(a)}var To=function(e){var a=e.onChange,l=e.value,d=e.disabled,u=e.schema,i=u.treeData,g=u.dependencies,S=e.addons,m=S.dataPath,y=S.getFieldError,F=S.dependValues,A=F===void 0?[]:F,h=S.isFieldsTouched,b=e.allowClear,R=e.placeholder,x=(0,c.useState)([]),v=H()(x,2),D=v[0],$=v[1],U=(0,c.useState)(!1),B=H()(U,2),k=B[0],L=B[1],W=(0,c.useContext)(we),f=t().get(W,"requestHeaders",{})||{},P=function(){var T=i!=null&&i.params?i==null?void 0:i.params:{};t().forEach(g,function(O,G){A[G]&&t().set(T,t().last(O.split(".")),A[G])}),L(!0),ce(i==null?void 0:i.url,{method:"get",params:T,headers:r()({},f)}).then(function(O){var G=t().map(t().get(O,(i==null?void 0:i.path)||"data",[]),function(Q){return{label:String(t().get(Q,(i==null?void 0:i.labelFeild)||"name")),value:t().isArray(i==null?void 0:i.valueFeild)?Do(Q,i==null?void 0:i.valueFeild):String(t().get(Q,(i==null?void 0:i.valueFeild)||"id"))}});$(G),L(!1)}).catch(function(O){L(!1),$([])})};return(0,c.useEffect)(function(){P()},[]),(0,$n.Z)(function(){h()&&a(void 0),P()},A),(0,o.jsx)(Sn.Z,{status:t().isEmpty(y(m))?"":"error",style:{width:"100%"},value:l,onChange:a,disabled:d,options:D,allowClear:!!b,placeholder:R,loading:k})},Fo=To,Ro=function(e){var a=e.onChange,l=e.value,d=e.disabled,u=e.schema,i=u.treeData,g=u.dependencies,S=e.addons,m=S.dataPath,y=S.getFieldError,F=S.dependValues,A=F===void 0?[]:F,h=S.isFieldsTouched,b=e.allowClear,R=e.placeholder,x=(0,c.useState)(!1),v=H()(x,2),D=v[0],$=v[1],U=(0,c.useState)([]),B=H()(U,2),k=B[0],L=B[1],W=(0,c.useContext)(we),f=t().get(W,"requestHeaders",{})||{},P=function(){var T=i!=null&&i.params?i==null?void 0:i.params:{};t().forEach(g,function(O,G){A[G]&&t().set(T,t().last(O.split(".")),A[G])}),$(!0),ce(i==null?void 0:i.url,{method:"get",params:T,headers:r()({},f)}).then(function(O){var G=t().map(t().get(O,(i==null?void 0:i.path)||"data",[]),function(Q){return{label:String(t().get(Q,(i==null?void 0:i.labelFeild)||"name")),value:Number(t().get(Q,(i==null?void 0:i.valueFeild)||"id"))}});L(G),$(!1)}).catch(function(O){L([]),$(!1)})};return(0,c.useEffect)(function(){P()},[]),(0,$n.Z)(function(){h()&&a(void 0),P()},A),(0,o.jsx)(Sn.Z,{status:t().isEmpty(y(m))?"":"error",style:{width:"100%"},value:l,onChange:a,disabled:d,options:k,allowClear:!!b,placeholder:R,loading:D})},Bo=Ro;function Oo(s,e){var a={};return t().forEach(e,function(l){a[l]=s[l]}),JSON.stringify(a)}var No=function(e){var a=e.onChange,l=e.value,d=e.disabled,u=e.schema,i=u.treeData,g=u.dependencies,S=e.addons,m=S.dataPath,y=S.getFieldError,F=S.dependValues,A=e.allowClear,h=e.placeholder,b=(0,c.useContext)(we),R=t().get(b,"requestHeaders",{})||{},x=(0,c.useState)([]),v=H()(x,2),D=v[0],$=v[1],U=function(W){var f=i!=null&&i.params?i==null?void 0:i.params:{};t().forEach(g,function(P,N){F[N]&&t().set(f,t().last(P.split(".")),F[N])}),t().set(f,i!=null&&i.keywordFeild?i==null?void 0:i.keywordFeild:"keyword",W),ce(i==null?void 0:i.url,{method:"get",params:f,headers:r()({},R)}).then(function(P){var N=t().map(t().get(P,(i==null?void 0:i.path)||"data",[]),function(T){return{label:String(t().get(T,(i==null?void 0:i.labelFeild)||"name")),value:t().isArray(i==null?void 0:i.valueFeild)?Oo(T,i==null?void 0:i.valueFeild):String(t().get(T,(i==null?void 0:i.valueFeild)||"id"))}});$(N)}).catch(function(){$([])})},B=function(W){W?U(W):$([])},k=function(W){a(W)};return(0,o.jsx)(Sn.Z,{status:t().isEmpty(y(m))?"":"error",showSearch:!0,style:{width:"100%"},value:l,placeholder:h,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:t().debounce(B,200),onChange:k,notFoundContent:null,options:D,disabled:d,allowClear:A})},Zo=No,Io=p(68707),Po=p(34790);function Wo(s){var e=s.matchBefore(/\w*/);return console.log(e),e.from===e.to&&!s.explicit?null:{from:e.from,options:[{label:"match",type:"keyword"},{label:"hello",type:"variable",info:"(World)"},{label:"magic",type:"text"}]}}var Mo=function(e){var a=e.disabled,l=e.readOnly,d=e.value,u=e.onChange,i=t().get(e,"schema.props.placeholder","\u8BF7\u586B\u5165\u6307\u5B9A\u683C\u5F0F\u7684\u6570\u636E");return(0,o.jsx)("div",{className:"agul-ui-newform-widget-code-editor",children:(0,o.jsx)(xt.ZP,{value:d||"",editable:!a&&!l,height:"200px",maxHeight:"400px",placeholder:i,width:"100%",onChange:u,className:"code-editor-content",extensions:[Io.sy,(0,Po.ys)({override:[Wo]})]})})},Lo=Mo,_o=["schema","formData","onChange","forwordRef","onSubmit","submitText","onCancel","cancelText","extraButtons","widgets","watch"],Ho=function(e){var a=e.onChange,l=e.accept,d=e.value,u=(0,c.useRef)(null),i=function(){a(null)};function g(S){var m=t().get(S,["target","files",0])||t().get(S,["dataTransfer","files",0])||t().get(this,["file","files",0]);m?a(m):i()}return(0,o.jsxs)("div",{children:[(0,o.jsx)("input",{type:"file",accept:l,style:{display:"none"},ref:u,onChange:g}),d?(0,o.jsxs)("span",{children:[d==null?void 0:d.name,"\xA0",(0,o.jsx)(pt.Z,{onClick:i,style:{cursor:"pointer"}})]}):(0,o.jsx)(de.Z,{onClick:function(){var m;return u==null||(m=u.current)===null||m===void 0?void 0:m.click()},children:"\u9009\u62E9\u6587\u4EF6"})]})},ko=function(e){var a=e.schema,l=e.formData,d=e.onChange,u=d===void 0?function(){}:d,i=e.forwordRef,g=e.onSubmit,S=e.submitText,m=e.onCancel,y=e.cancelText,F=e.extraButtons,A=F===void 0?[]:F,h=e.widgets,b=h===void 0?{}:h,R=e.watch,x=R===void 0?{}:R,v=ct()(e,_o);delete v.onFinish;var D=(0,yt.cI)(),$=t().get(a,"action.init",function(){}),U=t().get(a,"action.change",function(){}),B=t().get(a,"action.submit",function(){}),k=(0,c.useMemo)(function(){return t().cloneDeep(a)},[a]);(0,c.useLayoutEffect)(function(){l&&Ne(l)&&($(l),D.setValues(l))},[l]),(0,c.useImperativeHandle)(i,function(){return r()({validate:function(){return D.validateFields().then(function(T){return B(T),T}).catch(function(T){return t().set(T,"errors",t().get(T,"errorFields")),T})}},D)},[i]);var L=function(T){B(T),g(T)};Ne(x)&&delete x["#"];var W=Ne(x)?r()({"#":{handler:function(T){u&&(U(T),u(T))},immediate:!1}},x):{},f=(0,c.useContext)(Ue),P=(0,c.useMemo)(function(){var N={};return Ne(b)&&t().forEach(b,function(T,O){typeof T=="string"?N[O]=f&&f[T]||"div":typeof T=="function"&&(N[O]=T)}),N},[b]);return(0,o.jsxs)("div",{className:"agul-new-form",children:[(0,o.jsx)(yt.ZP,r()({id:"newForm",onFinish:L,form:D,schema:k,watch:W,removeHiddenData:!1,widgets:r()({CustomUpload:Ho,CustomStringSelect:Fo,CustomNumberSelect:Bo,CustomTreeSelect:Ao,CustomCascader:Co,JsonEditor:uo,CodeEditor:Lo,AsyncSelect:Zo},P)},v)),(0,o.jsxs)("div",{id:"form-botton-box",className:"agul-new-form-button-box",children:[g?(0,o.jsx)(de.Z,{type:"primary",className:"agul-new-form-submit-btn",onClick:function(){D.submit()},children:S||"\u63D0\u4EA4"}):null,m?(0,o.jsx)(de.Z,{className:"agul-new-form-cancel-btn",onClick:function(){m()},children:y||"\u53D6\u6D88"}):null,A]})]})},Pe=(0,c.forwardRef)(function(s,e){return(0,o.jsx)(ko,r()(r()({},s),{},{forwordRef:e}))}),Uo={height:"70vh",overflowY:"auto",padding:"14px"},Vo=function(e){var a=e.width,l=a===void 0?"40vw":a,d=e.height,u=d===void 0?"45vh":d,i=e.title,g=e.onSuccess,S=e.onCancel,m=e.schema,y=e.widgets,F=e.disabled,A=e.open,h=e.formData,b=e.forwordRef;return(0,o.jsx)(Cn.Z,{width:l,open:A,title:i,onOk:g,onCancel:S,destroyOnClose:!0,centered:!0,children:(0,o.jsx)("div",{style:r()(r()({},Uo),{},{height:u}),children:(0,o.jsx)(Pe,{schema:m,disabled:F,ref:b,formData:h,widgets:y})})})},wn=(0,c.forwardRef)(function(s,e){return(0,o.jsx)(Vo,r()(r()({},s),{},{forwordRef:e}))}),Yl=p(38390),wt=p(84908),Kl=p(44182),Hn=p(2587),Xl="YYYY-MM-DD",zo="YYYY-MM-DD HH:mm:ss",Qe="rgl",Ql="antd",Go=p(94184),Jo=p.n(Go),Yo=p(48555),Ko=p(91907),Xo=Ko.cd,Qo=function(e){var a=e.columns,l=e.scroll,d=(0,c.useState)(0),u=H()(d,2),i=u[0],g=u[1],S=a.filter(function(x){var v=x.width;return!v}).length,m=a.map(function(x){return x.width?x:r()(r()({},x),{},{width:Math.floor(i/S)})}),y=(0,c.useRef)(),F=(0,c.useState)(function(){var x={};return Object.defineProperty(x,"scrollLeft",{get:function(){if(y.current){var D,$;return(D=y.current)===null||D===void 0||($=D.state)===null||$===void 0?void 0:$.scrollLeft}return null},set:function(D){y.current&&y.current.scrollTo({scrollLeft:D})}}),x}),A=H()(F,1),h=A[0],b=function(){var v;(v=y.current)===null||v===void 0||v.resetAfterIndices({columnIndex:0,shouldForceUpdate:!0})};(0,c.useEffect)(function(){return b},[i]);var R=function(v,D){var $=D.scrollbarSize,U=D.ref,B=D.onScroll;U.current=h;var k=v.length*54;return(0,o.jsx)(Xo,{ref:y,className:"virtual-grid",columnCount:m.length,columnWidth:function(W){var f=m[W].width;return k>l.y&&W===m.length-1?f-$-1:f},height:l.y,rowCount:v.length,rowHeight:function(){return 54},width:i,onScroll:function(W){var f=W.scrollLeft;B({scrollLeft:f})},children:function(W){var f=W.columnIndex,P=W.rowIndex,N=W.style;return(0,o.jsx)("div",{className:Jo()("agul-virtual-table-cell",{"virtual-table-cell-last":f===m.length-1}),style:N,children:m[f].render?m[f].render(v[P][m[f].dataIndex],v[P],P):v[P][m[f].dataIndex]})}})};return(0,o.jsx)(Yo.Z,{onResize:function(v){var D=v.width;g(D)},children:(0,o.jsx)(jn.Z,r()(r()({},e),{},{className:"agul-virtual-table",columns:m,pagination:!1,components:{body:R}}))})},Et=Qo,ql=p(22536),At=p(11382),qe="_______agul_loading_box_id_______",ue={show:function(e){if(!_n(document.getElementById(qe))){var a=document.createElement("div");a.id=qe,e?(a.className="agul_loading_wrap",this.container=e,typeof e=="string"?_n(document.getElementById(e))?(document.getElementById(e).classList.add("agul_loading_wrap_parent"),document.getElementById(e).append(a)):console.error("\u8BE5\u5143\u7D20\u4E0D\u5B58\u5728\uFF0C\u65E0\u6CD5\u663E\u793Aloading\uFF01"):(e.classList.add("agul_loading_wrap_parent"),e.append(a))):(a.className="agul_loading_fixed_wrap",document.body.append(a)),dn.render((0,o.jsx)(At.Z,{size:"large"}),a)}},hide:function(){document.getElementById(qe)&&(this.container?(typeof this.container=="string"?_n(document.getElementById(this.container))&&(document.getElementById(this.container).classList.remove("agul_loading_wrap_parent"),document.getElementById(this.container).removeChild(document.getElementById(qe))):(this.container.classList.remove("agul_loading_wrap_parent"),this.container.removeChild(document.getElementById(qe))),this.container=null):document.body.removeChild(document.getElementById(qe)))}},Dt={overflow:" hidden",whiteSpace:"nowrap",textOverflow:" ellipsis"},qo=/\{.*\}/g,Tt=Hn.Z.Item,ea=function(e){var a=e.url,l=e.dataSource,d=e.field,u=e.path,i=e.names,g=e.enums,S=e.tableConfig,m=e.objectConfig,y=e.init,F=y===void 0?function(){}:y,A=e.extraButtons,h=A===void 0?[]:A,b=e.getDetailValue,R=function W(f,P,N,T){if(t().isArray(f)){var O=t().get(N,[P,"childTable"]),G=function(Y){return t().forEach(t().isArray(O==null?void 0:O.columns)?De()(O==null?void 0:O.columns):[],function(ae){var V=ae.render,X=ae.format,ee=ae.width;X?(ae.width=ee||void 0,ae.render=V||function(q){return q?(0,o.jsx)(wt.Z,{title:Xe(q).format(X),placement:"topLeft",children:(0,o.jsx)("div",{style:r()(r()({},Dt),{},{width:ee||void 0}),children:Xe(q).format(X)})}):"-"}):(ae.width=ee||void 0,ae.render=V||function(q){return(0,o.jsx)(wt.Z,{title:q,placement:"topLeft",children:(0,o.jsx)("div",{style:r()(r()({},Dt),{},{width:ee||void 0}),children:q})})})}),(0,o.jsx)("div",{style:{paddingLeft:70},children:(0,o.jsx)(jn.Z,{dataSource:Y[O==null?void 0:O.field]||[],columns:t().isArray(O==null?void 0:O.columns)?De()(O==null?void 0:O.columns):[],pagination:!1,size:"small"})})},Q={expandedRowRender:G,defaultExpandedRowKeys:["0"]};return O&&t().forEach(D,function(J,Y){J.key=Y.toString()}),(0,o.jsx)(Et,{scroll:{y:300},dataSource:f,columns:t().get(N,[P,"columns"],[]),expandable:O?Q:void 0})}else return t().isObject(f)?(0,o.jsxs)("div",{children:[(0,o.jsx)("br",{}),(0,o.jsx)(Hn.Z,{column:1,children:t().map(f,function(J,Y){var ae,V;return(0,o.jsx)(Tt,{label:(0,o.jsx)("div",{children:(ae=m[P])===null||ae===void 0?void 0:ae.names[Y]}),children:W(J,Y,(V=m[P])===null||V===void 0?void 0:V.tableConfig,T)})})})]}):(0,o.jsx)("pre",{children:t().get(T,[P])?t().get(T,[P,f]):t().includes(P,"Time")&&f?Xe(f).format(zo):f})},x=(0,c.useState)(l||{}),v=H()(x,2),D=v[0],$=v[1];(0,c.useEffect)(function(){t().isFunction(b)&&b(D)},[D]);var U=(0,Oe.TH)(),B=(0,c.useContext)(we),k=t().get(B,"requestHeaders",{})||{},L=function(){var f=t().get(U,["query"]),P=a.replaceAll(qo,t().get(f,[d]));ue.show(),ce(P,{method:"get",headers:r()({},k)}).then(function(N){ue.hide();var T=t().get(N,u);T&&(t().isFunction(F)&&F(T),$(T))}).catch(function(N){ue.hide(),$({}),console.error(N.message)})};return(0,c.useEffect)(function(){a&&L()},[a]),(0,o.jsxs)("div",{className:"agul-new-detail",children:[(0,o.jsx)(Hn.Z,{column:1,children:t().map(i,function(W,f){return(0,o.jsx)(Tt,{label:(0,o.jsx)("div",{children:W}),children:R(D[f],f,S,g)})})}),(0,o.jsx)("div",{className:"agul-detail-btn-box",children:t().isArray(h)?h:null})]})},Ft=ea,na={height:"70vh",overflowY:"auto",padding:"14px"},ta=function(e){var a=e.title,l=e.onCancel,d=e.open,u=e.data,i=u===void 0?{}:u,g=e.width,S=g===void 0?"40vw":g;return(0,o.jsx)(Cn.Z,{width:S,open:d,title:a||"\u8BE6\u60C5",onCancel:l,destroyOnClose:!0,footer:null,centered:!0,children:(0,o.jsx)("div",{style:na,children:(0,o.jsx)(Ft,r()({},i))})})},oa=(0,c.forwardRef)(function(s,e){return(0,o.jsx)(ta,r()(r()({},s),{},{forwordRef:e}))}),aa=p.p+"static/empty.30d021fe.png",la=["url","method","path","pagePath","params","columns","rowSelect","operate","forwordRef","needOrder","childTable","height","rowKey","exportBtn","tableExportBoxId","rowConfig","tableOperateBoxId","extraPagination"],ia={display:"inline-block",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",minWidth:30},ra={padding:"0 10px",display:"inline-block",minWidth:30,textAlign:"center"},da={display:"flex",alignItems:"center"},ua=[8,16,40,80],sa=function(e,a){return"\u5171".concat(e,"\u6761")},ca={lineHeight:"22px",borderRadius:12,width:"fit-content",border:"2px solid #e7e7e7",padding:"0 10px"},va={lineHeight:"22px",borderRadius:12,width:"fit-content",border:"2px solid #e7e7e7",padding:"0 10px",color:"#19b98d"},fa={lineHeight:"22px",borderRadius:12,backgroundColor:"#17b88c",color:"#fff",width:"fit-content",padding:"0 10px"},ha={lineHeight:"22px",borderRadius:12,color:"#e60012",width:"fit-content",border:"2px solid #e7e7e7",padding:"0 10px"},ma=function s(e,a,l){if(Ne(l))return s(e,a,l[e]);if(t().isString(l))switch(l){case"default":return t().isNil(e)?"-":(0,o.jsx)("div",{style:ca,children:Ne(a)?a[e]:e});case"success":return t().isNil(e)?"-":(0,o.jsx)("div",{style:fa,children:Ne(a)?a[e]:e});case"process":return t().isNil(e)?"-":(0,o.jsx)("div",{style:va,children:Ne(a)?a[e]:e});case"error":return t().isNil(e)?"-":(0,o.jsx)("div",{style:ha,children:Ne(a)?a[e]:e});default:return t().isNil(e)?"-":e}else return t().isNil(e)?"-":e},En="agul_new_table_operate_and_export_btn_box",ga={position:"absolute",margin:0,top:-45,right:0},pa=Yt.Z.RangePicker,ya={display:"flex",justifyContent:"flex-end"},xa=function(e,a){var l=Function;return new l("row","return "+a)(e)},Te=/\{.*\}/g,kn={open:!1,onOk:function(){},onCancel:function(){},msg:""},Rt={descend:"desc",ascend:"asc"},Ca={color:"#00b4e1"},Ve={showSizeChanger:!0,showQuickJumper:!0,position:["bottomRight"],showTotal:sa,current:1,pageSize:8,total:0,locale:{jump_to:"\u524D\u5F80"},pageSizeOptions:ua},en={title:"",open:!1,onSuccess:function(){},onCancel:function(){},readonly:!1,schema:{},formData:{},widgets:{}},nn={title:"",open:!1,onSuccess:function(){},onCancel:function(){},data:{}},ei={title:"",open:!1,onSuccess:function(){},onCancel:function(){},data:{}},ni={title:"",open:!1,onSuccess:function(){},onCancel:function(){},data:{}},Sa=function(e){var a=e.url,l=a===void 0?"":a,d=e.method,u=d===void 0?"get":d,i=e.path,g=i===void 0?"data":i,S=e.pagePath,m=S===void 0?"pageable":S,y=e.params,F=e.columns,A=F===void 0?[]:F,h=e.rowSelect,b=h===void 0?!1:h,R=e.operate,x=e.forwordRef,v=x===void 0?null:x,D=e.needOrder,$=D===void 0?!1:D,U=e.childTable,B=U===void 0?"":U,k=e.height,L=e.rowKey,W=L===void 0?"id":L,f=e.exportBtn,P=e.tableExportBoxId,N=e.rowConfig,T=e.tableOperateBoxId,O=e.extraPagination,G=ct()(e,la),Q=(0,c.useContext)(we),J=t().get(Q,"requestHeaders",{})||{},Y=function(n,w){var Z=r()({style:Ca,onClick:w},n==null?void 0:n.props);switch(n==null?void 0:n.type){case"add":return(0,o.jsx)(oo.Z,r()({},Z));case"edit":return(0,o.jsx)(ao.Z,r()({},Z));case"detail":return(0,o.jsx)(gt.Z,r()({},Z));case"delete":return(0,o.jsx)(pt.Z,r()({},Z));case"download":return(0,o.jsx)(lo.Z,r()({},Z));case"play":return(0,o.jsx)(io.Z,r()({},Z));case"file":return(0,o.jsx)(gt.Z,r()({},Z));default:return null}},ae=(0,c.useState)({}),V=H()(ae,2),X=V[0],ee=V[1],q=(0,c.useState)(y),ve=H()(q,2),ie=ve[0],Se=ve[1];(0,c.useEffect)(function(){Se(r()(r()({},y),X))},[y]);var le=(0,c.useState)(en),Ae=H()(le,2),Ze=Ae[0],E=Ae[1],sn=(0,c.useState)(nn),tn=H()(sn,2),ze=tn[0],Fe=tn[1],Re=(0,c.useState)([]),ne=H()(Re,2),te=ne[0],me=ne[1],se=(0,c.useRef)(),Ge=(0,c.useState)(r()(r()({},Ve),O)),We=H()(Ge,2),cn=We[0],on=We[1],Me=(0,c.useRef)(r()(r()({},Ve),O));(0,c.useEffect)(function(){Me.current=cn},[cn]);var Je=(0,c.useRef)(""),Ie=function(n,w){if(!l){console.warn("\u8BF7\u7ED9NewTable\u7EC4\u4EF6\u6B63\u786E\u7684url\u5C5E\u6027");return}var Z=n.pageSize,C=n.current;$o(w);var _=r()(r()({},w),{},{pageSize:Z,pageNumber:C});Je.current&&t().set(_,"sort",Je.current);var I=u==="get"?{params:_}:{data:_};ce(l,r()(r()({method:u},I),{},{headers:r()({},J)})).then(function(M){me($?t().map(t().get(M,g,[]),function(re,oe){return r()(r()({},re),{},{$order:oe+1+(C-1)*Z})}):t().get(M,g,[])),on(function(re){return r()(r()({},re),{},{pageSize:t().get(M,[m,"pageSize"],8),current:t().get(M,[m,"pageNumber"],1),total:t().get(M,[m,"total"],0)})})}).catch(function(M){console.error(M.message),me([]),on(Ve)})};(0,$n.Z)(function(){Ie(Ve,ie),on(Ve)},[ie,l]);var Dn=function(n,w,Z){var C="";t().isArray(Z)?t().forEach(Z,function(_){C+="".concat(t().get(_,"field"),":").concat(Rt[t().get(_,"order")],";")}):t().get(Z,"order")&&(C="".concat(t().get(Z,"field"),":").concat(Rt[t().get(Z,"order")],";")),Je.current=C,Ie(n,ie)},Yn=(0,c.useState)(!1),Tn=H()(Yn,2),Kn=Tn[0],Fn=Tn[1];(0,c.useEffect)(function(){var j=t().every(te,function(n){return n.checked||!n.checked});j&&Fn(t().get(te,[0,"checked"]))},[te]);var Xn=function(n,w){me(function(Z){var C=Z.map(function(_,I){return I===n?r()(r()({},_),{},{checked:w}):_});return C})},Qn=function(n){var w=n.target.checked;Fn(w),me(function(Z){var C=Z.map(function(_){return r()(r()({},_),{},{checked:w})});return C})},vn=(0,Oe.s0)(),qn=function(n,w){if(ke()(w)!=="object"&&(w={}),n!=null&&n.routerPath){var Z=n!=null&&n.field?"".concat(n==null?void 0:n.routerPath,"?").concat(n==null?void 0:n.field,"=").concat(t().get(w,n==null?void 0:n.field)):n==null?void 0:n.routerPath;vn(Z);return}var C=function(){var I;se==null||(I=se.current)===null||I===void 0||I.validate().then(function(M){var re;if(!(M!=null&&M.errors)||!(M!=null&&(re=M.errors)!==null&&re!==void 0&&re.length)){var oe=n==null?void 0:n.url.replaceAll(Te,t().get(w,n==null?void 0:n.field)),he={headers:r()({},J),method:(n==null?void 0:n.method)||"post"};(["put","post"].includes(n==null?void 0:n.method)||!(n!=null&&n.method))&&(t().set(he,"data",M),!Te.test(n==null?void 0:n.url)&&n!==null&&n!==void 0&&n.field&&t().set(he,"data.".concat(n==null?void 0:n.field),t().get(w,n==null?void 0:n.field))),ce(oe,he).then(function(){Ce.success({title:"\u64CD\u4F5C\u6210\u529F"}),E(en),Ie(Me.current,ie)}).catch(function(pe){console.error(pe.message)})}}).catch(function(M){})};E({title:n==null?void 0:n.text,open:!0,onSuccess:C,onCancel:function(){return E(en)},readonly:!1,schema:n==null?void 0:n.schema,widgets:n==null?void 0:n.widgets})},et=function(n,w){if(ke()(w)!=="object"&&(w={}),n!=null&&n.routerPath){var Z=n!=null&&n.field?"".concat(n==null?void 0:n.routerPath,"?").concat(n==null?void 0:n.field,"=").concat(t().get(w,n==null?void 0:n.field)):n==null?void 0:n.routerPath;vn(Z);return}var C=function(){var re;se==null||(re=se.current)===null||re===void 0||re.validate().then(function(oe){var he;if(!(oe!=null&&oe.errors)||!(oe!=null&&(he=oe.errors)!==null&&he!==void 0&&he.length)){var pe=n==null?void 0:n.url.replaceAll(Te,t().get(w,n==null?void 0:n.field)),xe={headers:r()({},J),method:(n==null?void 0:n.method)||"put"};(["put","post"].includes(n==null?void 0:n.method)||!(n!=null&&n.method))&&(t().set(xe,"data",oe),!Te.test(n==null?void 0:n.url)&&n!==null&&n!==void 0&&n.field&&t().set(xe,"data.".concat(n==null?void 0:n.field),t().get(w,n==null?void 0:n.field))),ce(pe,xe).then(function(){Ce.success({title:"\u64CD\u4F5C\u6210\u529F"}),E(en),Ie(Me.current,ie)}).catch(function(Be){console.error(Be.message)})}}).catch(function(oe){})};if(n!=null&&n.detailUrl){var _=n==null?void 0:n.detailUrl.replaceAll(Te,t().get(w,n==null?void 0:n.field)),I={headers:r()({},J),method:(n==null?void 0:n.detailMethod)||"get"};["put","post"].includes(n==null?void 0:n.detailMethod)&&!Te.test(n==null?void 0:n.detailUrl)&&n!==null&&n!==void 0&&n.field&&t().set(I,"data",$e()({},n==null?void 0:n.field,t().get(w,n==null?void 0:n.field))),ce(_,I).then(function(M){var re=t().get(M,(n==null?void 0:n.path)||"data");re||(re={}),E({title:n==null?void 0:n.text,open:!0,onSuccess:C,onCancel:function(){return E(en)},readonly:!1,schema:n==null?void 0:n.schema,widgets:n==null?void 0:n.widgets,formData:re})}).catch(function(M){console.error(M.message)})}else E({title:n==null?void 0:n.text,open:!0,onSuccess:C,onCancel:function(){return E(en)},readonly:!1,schema:n==null?void 0:n.schema,widgets:n==null?void 0:n.widgets,formData:w})},nt=function(n,w){if(ke()(w)!=="object"&&(w={}),n!=null&&n.routerPath){var Z=n!=null&&n.field?"".concat(n==null?void 0:n.routerPath,"?").concat(n==null?void 0:n.field,"=").concat(t().get(w,n==null?void 0:n.field)):n==null?void 0:n.routerPath;vn(Z);return}if(n!=null&&n.url){var C=n!=null&&n.field?n==null?void 0:n.url.replaceAll(Te,t().get(w,n==null?void 0:n.field)):n==null?void 0:n.url,_={headers:r()({},J),method:(n==null?void 0:n.method)||"get"};["put","post"].includes(n==null?void 0:n.method)&&!Te.test(n==null?void 0:n.url)&&n!==null&&n!==void 0&&n.field&&t().set(_,"data",$e()({},n==null?void 0:n.field,t().get(w,n==null?void 0:n.field))),ce(C,_).then(function(I){Fe({title:n==null?void 0:n.text,open:!0,onSuccess:function(){return Fe(nn)},onCancel:function(){return Fe(nn)},data:r()(r()({},n),{},{dataSource:t().get(I,(n==null?void 0:n.path)||"data"),url:null})})}).catch(function(I){Fe(nn),console.error(I.message)})}else Fe({title:n==null?void 0:n.text,open:!0,onSuccess:function(){return Fe(nn)},onCancel:function(){return Fe(nn)},data:r()(r()({},n),{},{dataSource:w})})},fn=(0,c.useState)(kn),Rn=H()(fn,2),z=Rn[0],hn=Rn[1],ye=function(n,w){ke()(w)!=="object"&&(w={}),hn({msg:"\u786E\u5B9A\u8981".concat(n==null?void 0:n.text,"\u8BE5\u9879\u5417\uFF1F"),open:!0,onOk:function(){var C=n==null?void 0:n.url.replaceAll(Te,t().get(w,n==null?void 0:n.field)),_={headers:r()({},J),method:n!=null&&n.method?n==null?void 0:n.method:"delete"};["put","post"].includes(n==null?void 0:n.method)&&!Te.test(n==null?void 0:n.url)&&n!==null&&n!==void 0&&n.field&&t().set(_,"data",$e()({},n==null?void 0:n.field,t().get(w,n==null?void 0:n.field))),ce(C,_).then(function(){Ce.success({title:"\u64CD\u4F5C\u6210\u529F"}),hn(kn),Ie(Ve,ie)}).catch(function(I){console.error(I.message)})},onCancel:function(){return hn(kn)}})},mn=function(n,w){ke()(w)!=="object"&&(w={});var Z,C={headers:r()({},n==null?void 0:n.headers)};if(n!=null&&n.field&&(n!=null&&n.url?Z=n==null?void 0:n.url.replaceAll(Te,t().get(w,n==null?void 0:n.field)):Z=t().get(w,n==null?void 0:n.field)),!Z){He.ZP.warn("\u8BE5\u8D44\u6E90\u5730\u5740\u65E0\u6548!");return}n!=null&&n.url&&!Te.test(n==null?void 0:n.url)&&["put","post"].includes(n==null?void 0:n.method)&&(C.method="post",C.body=JSON.stringify($e()({},n==null?void 0:n.field,t().get(w,n==null?void 0:n.field))));var _;fetch(Z,C).then(function(I){var M,re,oe,he=I.headers.get("Content-Disposition"),pe=typeof he=="string"?he.split(";")[1]:(M=w)===null||M===void 0?void 0:M.filename,xe="";return pe&&(xe=pe.split("fileName=")[1]?pe.split("fileName=")[1]:pe.split("filename=")[1]),xe=xe||((re=w)===null||re===void 0?void 0:re.filename)||((oe=w)===null||oe===void 0?void 0:oe.fileName),_=decodeURIComponent(xe),I.blob()}).then(function(I){if(!_){Ce.error({title:"\u4E0B\u8F7D\u9519\u8BEF\uFF0C\u8BF7\u8054\u7CFB\u5F00\u53D1\u4EBA\u5458\uFF01"});return}var M=document.createElement("a"),re=window.URL.createObjectURL(I);M.href=re,M.download=_,M.target="_blank",M.click(),window.URL.revokeObjectURL(re)}).catch(function(I){console.error(I.message)})},Bn=function(n,w){switch(n==null?void 0:n.type){case"add":qn(n,w);return;case"edit":et(n,w);return;case"detail":nt(n,w);return;case"delete":ye(n,w);return;case"download":mn(n,w);return;default:return}},tt=(0,c.useMemo)(function(){var j=function(w){return t().forEach(t().isArray(B==null?void 0:B.columns)?De()(B==null?void 0:B.columns):[],function(Z){var C=Z.render,_=Z.format;_&&(Z.render=C||function(I){return t().isNil(I)?"-":Xe(I).format(_)})}),(0,o.jsx)("div",{style:{paddingLeft:70},children:(0,o.jsx)(jn.Z,{dataSource:t().get(w,B==null?void 0:B.field,[]),columns:t().isArray(B==null?void 0:B.columns)?De()(B==null?void 0:B.columns):[],pagination:!1,size:"small"})})};return{expandedRowRender:j,defaultExpandedRowKeys:["0"]}},[B]);B&&t().forEach(te,function(j,n){j.key=n.toString()}),(0,c.useImperativeHandle)(v,function(){return ge},[te,v]);var Ye=function(){Se(r()(r()({},y),X))},ot=function(n,w){var Z=n.type,C=n.field,_=n.treeData,I=n.props,M=C||w;switch(Z){case"input":return function(oe){var he=oe.close;return(0,o.jsxs)("div",{style:{padding:12,overflow:"hidden"},children:[(0,o.jsx)(st.Z,r()({allowClear:!0,style:{width:150,display:"flex"},value:X[M],onChange:function(xe){return ee(function(Be){return r()(r()({},Be),{},$e()({},M,xe.target.value))})}},I)),(0,o.jsx)(de.Z,{type:"primary",size:"small",onClick:function(){Ye(),he()},style:{marginTop:14,float:"right"},children:"\u786E\u8BA4"})]})};case"select":return function(oe){var he=oe.close;return(0,o.jsxs)("div",{style:{padding:12,overflow:"hidden"},children:[(0,o.jsx)(Sn.Z,r()({allowClear:!0,style:{width:150,display:"block"},value:X[M],onChange:function(xe){return ee(function(Be){return r()(r()({},Be),{},$e()({},M,xe))})},options:_},I)),(0,o.jsx)(de.Z,{type:"primary",size:"small",onClick:function(){Ye(),he()},style:{marginTop:14,float:"right"},children:"\u786E\u8BA4"})]})};case"checkbox":return function(oe){var he=oe.close;return(0,o.jsxs)("div",{style:{padding:12,overflow:"hidden"},children:[(0,o.jsx)(rn.Z.Group,r()({style:{width:150,display:"block"},options:_,value:X[M],onChange:function(xe){return ee(function(Be){return r()(r()({},Be),{},$e()({},M,xe))})}},I)),(0,o.jsx)(de.Z,{type:"primary",size:"small",onClick:function(){Ye(),he()},style:{marginTop:14,float:"right"},children:"\u786E\u8BA4"})]})};case"dateRange":var re=X[t().get(C,[0])?t().get(C,[0]):"startTime"]&&X[t().get(C,[1])?t().get(C,[1]):"endTime"]?[un()(X[t().get(C,[0])?t().get(C,[0]):"startTime"]),un()(X[t().get(C,[1])?t().get(C,[1]):"endTime"])]:[];return function(oe){var he=oe.close;return(0,o.jsxs)("div",{style:{padding:12,overflow:"hidden"},children:[(0,o.jsx)(pa,r()({allowClear:!0,style:{display:"flex"},value:re,onChange:function(xe,Be){t().isEmpty(t().pickBy(Be))?ee(function(xn){return delete xn[t().get(C,[0])?t().get(C,[0]):"startTime"],delete xn[t().get(C,[1])?t().get(C,[1]):"endTime"],r()({},xn)}):ee(function(xn){var Zn;return r()(r()({},xn),{},(Zn={},$e()(Zn,t().get(C,[0])?t().get(C,[0]):"startTime",un()(Be[0]).utcOffset(8).format()),$e()(Zn,t().get(C,[1])?t().get(C,[1]):"endTime",un()(Be[1]).utcOffset(8).format()),Zn))})}},I)),(0,o.jsx)(de.Z,{type:"primary",size:"small",onClick:function(){Ye(),he()},style:{marginTop:14,float:"right"},children:"\u786E\u8BA4"})]})};default:return function(){return(0,o.jsxs)("div",{style:{padding:12,overflow:"hidden"},children:[(0,o.jsx)(st.Z,{value:X[M],onChange:function(he){return ee(function(pe){return r()(r()({},pe),{},$e()({},M,he.target.value))})}}),(0,o.jsx)(de.Z,{type:"primary",size:"small",onClick:function(){return Ye()},style:{marginTop:14,float:"right"},children:"\u786E\u8BA4"})]})}}},at=(0,c.useState)(!1),On=H()(at,2),lt=On[0],Le=On[1],gn=(0,c.useState)({old:t().map(t().isArray(A)?De()(A):[],function(j){return j.dataIndex||j.key}),new:t().map(t().isArray(A)?De()(A):[],function(j){return j.dataIndex||j.key})}),_e=H()(gn,2),pn=_e[0],yn=_e[1],it=function(){yn(function(n){return r()(r()({},n),{},{old:n.new||[]})}),Le(!1)},an=function(){yn(function(n){return r()(r()({},n),{},{new:n.old||[]})}),Le(!1)},fe=(0,c.useMemo)(function(){return t().map(t().filter(N||[],function(j){return t().includes(pn.old||[],(j==null?void 0:j.dataIndex)||(j==null?void 0:j.key))}),function(j){return j.dataIndex||j.key})},[pn.old]),K=N?t().filter(t().isArray(A)?De()(A):[],function(j){return t().includes(fe,(j==null?void 0:j.dataIndex)||(j==null?void 0:j.key))}):t().isArray(A)?De()(A):[];$&&!t().some(K,{dataIndex:"$order"})&&K.unshift({title:"\u7F16\u53F7",dataIndex:"$order"}),b&&!t().some(K,{dataIndex:"$rowSelect"})&&K.unshift({title:(0,o.jsx)(rn.Z,{checked:Kn,onChange:Qn}),width:100,fixed:"left",dataIndex:"$rowSelect",render:function(n,w,Z){return(0,o.jsx)(rn.Z,{checked:w.checked,onChange:function(_){var I=_.target.checked;return Xn(Z,I)}})}});var ge={checkedData:t().filter(te,{checked:!0}),reload:function(){Ie(Ve,ie)},update:function(){Ie(Me.current,ie)}},je=(0,c.useContext)(Ue);R&&!t().some(K,{dataIndex:"$operate"})&&K.push({title:"\u64CD\u4F5C",dataIndex:"$operate",fixed:"right",width:(R==null?void 0:R.mode)==="icon"?t().get(R,"buttons.length",0)*20:t().reduce(t().get(R,"buttons"),function(j,n){return j+(t().get(n,"text.length")?t().get(n,"text.length")*14:60)+16},0)+32,render:function(n,w){var Z=(R==null?void 0:R.buttons)||[];return w?(0,o.jsx)("div",{style:da,className:"agul-newtable-operate-box",children:t().map(Z,function(C,_){return(0,o.jsxs)(o.Fragment,{children:[C!=null&&C.condition&&!xa(w,C.condition)?(0,o.jsx)("a",{style:ra,children:"-"}):(C==null?void 0:C.type)==="custom"?typeof(C==null?void 0:C.widget)=="string"?je&&je[C==null?void 0:C.widget]?(0,c.createElement)(je[C==null?void 0:C.widget],r()(r()({},ge),{},{row:w})):C==null?void 0:C.widget:typeof(C==null?void 0:C.widget)=="function"?(0,c.createElement)(C==null?void 0:C.widget,r()(r()({},ge),{},{row:w})):null:(R==null?void 0:R.mode)==="icon"?Y(C,t().debounce(function(){return Bn(C,w)},200)):(0,o.jsx)("a",r()(r()({onClick:t().debounce(function(){return Bn(C,w)},200),style:ia},C==null?void 0:C.props),{},{children:C==null?void 0:C.text})),_===t().get(Z,"length",0)-1?null:(0,o.jsx)(Ht.Z,{type:"vertical"})]})})}):null}});var be=t().map(K,function(j){var n=j.render,w=j.format,Z=j.enums,C=j.tagType,_=j.otherFilters;return _&&(j.filterDropdown=ot(_,(j==null?void 0:j.dataIndex)||(j==null?void 0:j.key))),w?r()(r()({},j),{},{render:n||function(I){return t().isNil(I)?"-":Xe(I).format(w)}}):C?r()(r()({},j),{},{render:n||function(I){return ma(I,Z,C)}}):Ne(Z)?r()(r()({},j),{},{render:n||function(I){return t().isNil(I)?"-":Z[I]}}):r()({},j)}),ln=function(){var n={headers:r()({},f==null?void 0:f.headers)},w=f!=null&&f.params?f==null?void 0:f.params:{};w=r()(r()({},w),ie),(f==null?void 0:f.method)==="post"&&(n.method="post",n.body=JSON.stringify(w));var Z;fetch(f==null?void 0:f.url,n).then(function(C){var _=C.headers.get("Content-Disposition"),I=typeof _=="string"?_.split(";")[1]:f==null?void 0:f.filname,M="";return I&&(M=I.split("fileName=")[1]?I.split("fileName=")[1]:I.split("filename=")[1]),M=M||(f==null?void 0:f.filename)||(f==null?void 0:f.fileName),Z=decodeURIComponent(M),C.blob()}).then(function(C){if(!Z){Ce.error({title:"\u6587\u4EF6\u540D\u7F3A\u5931\u3001\u4E0B\u8F7D\u9519\u8BEF\uFF0C\u8BF7\u8054\u7CFB\u5F00\u53D1\u4EBA\u5458\uFF01"});return}var _=document.createElement("a"),I=window.URL.createObjectURL(C);_.href=I,_.download=Z,_.target="_blank",_.click(),window.URL.revokeObjectURL(I)}).catch(function(C){console.error(C.message)})},Nn=(0,c.useRef)(),yl=(0,c.useState)(!1),Lt=H()(yl,2),xl=Lt[0],Cl=Lt[1];return(0,c.useEffect)(function(){Cl(!0)},[]),(0,o.jsxs)("div",{style:{position:"relative"},children:[(0,o.jsx)(Cn.Z,{width:"40vw",open:lt,title:"\u81EA\u5B9A\u4E49\u5217\u8868\u5B57\u6BB5",onCancel:an,destroyOnClose:!0,footer:(0,o.jsx)("div",{style:ya,children:(0,o.jsxs)(_t.Z,{children:[(0,o.jsx)(de.Z,{onClick:an,children:"\u53D6\u6D88"}),(0,o.jsx)(de.Z,{type:"primary",onClick:it,children:"\u786E\u8BA4"})]})}),children:(0,o.jsx)(rn.Z.Group,{value:pn.new||[],onChange:function(n){return yn(function(w){return r()(r()({},w),{},{new:n})})},children:(0,o.jsx)(dt.Z,{children:t().map(N,function(j){return(0,o.jsx)(ut.Z,{span:24,children:(0,o.jsx)(rn.Z,{value:(j==null?void 0:j.dataIndex)||(j==null?void 0:j.key),style:{marginBottom:14},disabled:!!(j!=null&&j.disabled),children:j==null?void 0:j.title})})})})})}),(0,o.jsx)("div",{id:En,style:ga,ref:Nn}),f?P&&document.getElementById(P)?(0,dn.createPortal)((0,o.jsx)(de.Z,{type:"primary",onClick:function(){return ln()},children:(f==null?void 0:f.text)||"\u5BFC\u51FA"}),document.getElementById(P)):document.getElementById(En)?(0,dn.createPortal)((0,o.jsx)(de.Z,{type:"primary",onClick:function(){return ln()},children:(f==null?void 0:f.text)||"\u5BFC\u51FA"}),document.getElementById(En)):null:null,N&&xl?T&&document.getElementById(T)?(0,dn.createPortal)((0,o.jsx)(de.Z,{type:"primary",onClick:function(){Le(!0)},children:"\u914D\u7F6E\u5217"}),document.getElementById(T)):document.getElementById(En)?(0,dn.createPortal)((0,o.jsx)(de.Z,{type:"primary",onClick:function(){Le(!0)},style:{marginLeft:f&&P&&document.getElementById(P)?14:0},children:"\u914D\u7F6E\u5217"}),Nn.current):null:null,(0,o.jsx)(jn.Z,r()({scroll:{x:"max-content",y:k},dataSource:te,columns:be,pagination:l?cn:!1,onChange:l?Dn:function(){},expandable:B?tt:void 0,rowKey:W,locale:{emptyText:(0,o.jsxs)("div",{style:{textAlign:"center",padding:"60px 0"},children:[(0,o.jsx)("img",{style:{width:320,height:220},src:aa,alt:""}),(0,o.jsx)("div",{style:{fontSize:14,color:"#888",textAlign:"center"},children:"\u6682\u65E0\u6570\u636E"})]})}},G)),(0,o.jsx)(wn,r()(r()({},Ze),{},{ref:se})),(0,o.jsx)(oa,r()({},ze)),(0,o.jsxs)(Cn.Z,r()(r()({destroyOnClose:!0,width:"40vw",title:"\u6E29\u99A8\u63D0\u793A",footer:null},z),{},{children:[(0,o.jsx)("div",{style:{fontSize:13,color:"#575757",textAlign:"center"},children:z.msg}),(0,o.jsxs)("div",{style:{margin:"30px auto 14px",width:200,display:"flex",justifyContent:"space-between"},children:[(0,o.jsx)(de.Z,{onClick:function(){return z.onCancel()},children:"\u53D6\u6D88"}),(0,o.jsx)(de.Z,{onClick:function(){return z.onOk()},type:"primary",children:"\u786E\u8BA4"})]})]}))]})},Un=(0,c.forwardRef)(function(s,e){return(0,o.jsx)(Sa,r()(r()({},s),{},{forwordRef:e}))}),Bt=p(57632),Vn={title:"",open:!1,onSuccess:function(){},onCancel:function(){},readonly:!1,schema:{},formData:{},widgets:{}},ja=function(e){var a=e.url,l=e.method,d=l===void 0?"get":l,u=e.path,i=u===void 0?"data":u,g=e.pagePath,S=g===void 0?"pageable":g,m=e.columns,y=m===void 0?[]:m,F=e.childTable,A=e.rowSelect,h=A===void 0?!1:A,b=e.schema,R=e.style,x=e.widgets,v=e.addBtn,D=e.extraBtns,$=e.tableOperate,U=e.rowConfig,B=e.exportBtn,k=e.needOrder,L=k===void 0?!1:k,W=e.tableHeight,f=e.params,P=e.tableRef,N=(0,c.useRef)(null),T=(0,c.useRef)(null),O=(0,c.useState)(Vn),G=H()(O,2),Q=G[0],J=G[1],Y=(0,c.useState)({}),ae=H()(Y,2),V=ae[0],X=ae[1],ee=(0,c.useState)(!1),q=H()(ee,2),ve=q[0],ie=q[1],Se=function(){var ne,te=t().get(b,"action.init",function(){}),me=N==null||(ne=N.current)===null||ne===void 0?void 0:ne.getValues();te(me),X(r()({},me)),ie(!0)},le=(0,Oe.s0)(),Ae=(0,c.useContext)(we),Ze=t().get(Ae,"requestHeaders",{})||{},E=function(){var ne;N==null||(ne=N.current)===null||ne===void 0||ne.validate().then(function(te){var me;(!(te!=null&&te.errors)||!(te!=null&&(me=te.errors)!==null&&me!==void 0&&me.length))&&(t().set(te,"___agul_ui_time____",new Date().getTime()),X(t().pickBy(te,function(se){return!t().isNil(se)})))}).catch(function(te){console.log(te)})},sn=function(){var ne;N==null||(ne=N.current)===null||ne===void 0||ne.resetFields(),X({___agul_ui_time____:new Date().getTime()})},tn=function(){if(v!=null&&v.routerPath){le(v==null?void 0:v.routerPath);return}var ne=function(){var me;T==null||(me=T.current)===null||me===void 0||me.validate().then(function(se){var Ge;(se instanceof FormData||!(se!=null&&se.errors)||!(se!=null&&(Ge=se.errors)!==null&&Ge!==void 0&&Ge.length))&&ce(v==null?void 0:v.url,{method:v!=null&&v.method?v==null?void 0:v.method:"post",data:se,headers:r()({},Ze)}).then(function(){Ce.success({title:"\u64CD\u4F5C\u6210\u529F"}),J(Vn),sn()}).catch(function(We){console.error(We.message)})}).catch(function(se){console.error(se.message)})};J({title:v==null?void 0:v.text,open:!0,schema:v==null?void 0:v.schema,widgets:v==null?void 0:v.widgets,onSuccess:ne,onCancel:function(){return J(Vn)},readonly:!1})},ze=(0,Bt.Z)(),Fe=(0,c.useMemo)(function(){return f?r()(r()({},f),V):V},[V]);return(0,o.jsxs)("div",{className:"agul-table-with-form-container",style:R,children:[b?(0,o.jsxs)("div",{className:"agul-table-with-form-box",children:[(0,o.jsx)("div",{className:"agul-table-form",children:(0,o.jsx)(Pe,{schema:b,widgets:x,ref:N,onMount:Se})}),(0,o.jsxs)("div",{className:"agul-table-with-operate-box",id:ze,children:[(0,o.jsx)(de.Z,{onClick:function(){return E()},children:"\u67E5\u8BE2"}),v?(0,o.jsx)(de.Z,r()(r()({type:"primary",onClick:tn},v==null?void 0:v.props),{},{children:(v==null?void 0:v.text)||"\u65B0\u5EFA"})):null,D]})]}):null,ve?(0,o.jsx)(Un,{rowKey:"id",url:a,params:Fe,columns:y,operate:$,rowConfig:U,path:i,pagePath:S,rowSelect:h,exportBtn:B,childTable:F,needOrder:L,method:d,tableOperateBoxId:ze,tableExportBoxId:ze,height:W,ref:P}):null,(0,o.jsx)(wn,r()(r()({},Q),{},{ref:T}))]})},ba=ja,ti=p(63102),Ot=p(58492),$a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAYCAYAAADZEIyjAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAABqADAAQAAAABAAAAGAAAAAC0QBRGAAAA9UlEQVQoFWWQUVLEMAxDlW5Y4I9rcP9rcBg+SAeWNubJbncY8Ewq1Y4kt23o9RaqaooItWbsU3McfdWFSOxSMOBSFoLkKJivDE8RWJyBUPwe1J3eyHBgvf6xqjjctaCdiWylcVzPppUekjHXcyAUomnMdU2r9jsSHmNqSdGiGeZGrBpWe+4bNM2NWE0UZ50sw4OtIq0qtuJZd18XXe6hSr57q4ZVWfBE6QXU2Er8xKoLTRTN2Nmcn7gdIwySd1ttDCx0bSjMt/AHYvVdfV3BG+dqhcbX0X6kaW60YjzrKa1Cn2Fu7F0bVh+H5gV854Bv0gOJ/84Pd3eJOVkggvkAAAAASUVORK5CYII=",wa=Ot.Z.Item,Ea=function(e){var a=e.routes,l=e.style;return(0,o.jsxs)(Ot.Z,{style:l,className:"agul-ui-navigation-container",children:[(0,o.jsx)("div",{className:"agul-ui-navigation-icon",style:{backgroundImage:"url(".concat($a,")")}}),t().map(a,function(d){return(0,o.jsx)(wa,{children:(0,o.jsx)("a",{href:d.path?d.path:"javascript:void(0)",children:d.name})})})]})},Nt=Ea,Zt=p(69968),oi=p(3688),Aa=p(18429),Da=p(27732),Ta=p(3089),zn=/\{.*\}/g,Fa=function(e){var a,l,d,u,i,g,S,m,y,F,A,h,b,R,x,v=e.data,D=e.style,$=(0,Oe.s0)(),U=(0,c.useState)({}),B=H()(U,2),k=B[0],L=B[1],W=(v==null?void 0:v.mapping)||{},f=v==null||(a=v.component)===null||a===void 0?void 0:a.url,P=v==null||(l=v.component)===null||l===void 0?void 0:l.path,N=v==null||(d=v.component)===null||d===void 0?void 0:d.field,T=v==null||(u=v.component)===null||u===void 0?void 0:u.method,O=v==null||(i=v.component)===null||i===void 0||(g=i.value)===null||g===void 0?void 0:g.disabled,G=v==null||(S=v.component)===null||S===void 0||(m=S.value)===null||m===void 0?void 0:m.schema,Q=v==null||(y=v.component)===null||y===void 0||(F=y.value)===null||F===void 0?void 0:F.widgets,J=(v==null||(A=v.component)===null||A===void 0||(h=A.value)===null||h===void 0?void 0:h.extraBtns)||[],Y=(0,Oe.TH)(),ae=t().get(Y,["query"]),V=v==null||(b=v.component)===null||b===void 0||(R=b.value)===null||R===void 0||(x=R.detailUrl)===null||x===void 0?void 0:x.replaceAll(zn,t().get(ae,[N])),X=zn.test(f)?f.replaceAll(zn,t().get(ae,[N])):f,ee=(0,c.useContext)(we),q=t().get(ee,"requestHeaders",{})||{};(0,c.useEffect)(function(){V&&(ue.show(),ce(V,{method:"get",headers:r()({},q)}).then(function(le){ue.hide();var Ae=t().get(le,P);Ae&&L(Ae)}).catch(function(le){ue.hide(),console.error(le.message)}))},[V]);var ve=function(Ae,Ze){Ze&&Ze.length||(ue.show(),ce(X,{method:T||(V?"put":"post"),data:Ae,headers:r()({},q)}).then(function(){Ce.success({title:"\u64CD\u4F5C\u6210\u529F"}),ue.hide(),ue.hide(),$(-1)}).catch(function(E){console.error(E.message),ue.hide()}))},ie=(0,c.useContext)(Ue),Se=(0,c.useRef)(null);return(0,o.jsx)("div",{className:"agul-form-card",style:D,children:(0,o.jsx)(Pe,{ref:Se,schema:G,widgets:Q,formData:k,onSubmit:O?void 0:ve,onCancel:O?void 0:function(){return $(-1)},globalDataFeilds:W.form,disabled:O,extraButtons:t().map(J,function(le){return typeof le=="string"?ie&&ie[le]?(0,c.createElement)(ie[le],{formRef:Se}):le:typeof le=="function"?(0,c.createElement)(le,{formRef:Se}):null})})})},Ra=Fa,Ba=function(e){var a=e.data,l=e.style,d=(a==null?void 0:a.component)||{},u=d.url,i=d.value,g=i===void 0?{}:i;return(0,o.jsx)("div",{className:"agul-video-card",style:l,children:(0,o.jsx)("video",r()({controls:!0,style:l,className:"agul-video-card",src:u},g))})},Oa=Ba,ai=Map,Na=function(e){var a=e.data,l=e.style,d=Wn(),u=d.timestamp,i=(a==null?void 0:a.component)||{},g=i.center,S=g===void 0?[121.46393964202484,31.21852413639573]:g,m=i.value,y=m===void 0?{}:m;return(0,o.jsx)("div",{style:l,className:"agul-map-card",children:"map"})},Za=Na,Ia=function(e){var a=e.data,l=e.style,d=Wn(),u=(0,Oe.s0)(),i=d.timestamp,g=(0,c.useMemo)(function(){var m,y;return a==null||(m=a.component)===null||m===void 0||(y=m.value)===null||y===void 0?void 0:y.data},[a]),S=(0,c.useMemo)(function(){var m,y;return a==null||(m=a.component)===null||m===void 0||(y=m.value)===null||y===void 0?void 0:y.url},[a]);return(0,o.jsx)("div",{className:"agul-falls-list-card",style:l,children:g.map(function(m){return(0,o.jsxs)("div",{className:"agul-falls-box",children:[(0,o.jsx)("div",{className:"agul-falls-title",children:m.title}),(0,o.jsx)("div",{className:"agul-falls-card",children:m==null?void 0:m.value.map(function(y){return(0,o.jsx)("div",{className:"agul-falls-card-item",onClick:function(){u(S)},children:y})})})]})})})},Pa=Ia,Gn={title:"",open:!1,onSuccess:function(){},onCancel:function(){},readonly:!1,schema:{},formData:{},widgets:{}};function Wa(s,e,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},d=s.target.files[0]||s.dataTransfer.files[0]||this.file.files[0],u=new FormData;u.set("file",d),ue.show(),ce(e,{method:"post",data:u,headers:r()({},l)}).then(function(){Ce.success({title:"\u64CD\u4F5C\u6210\u529F"}),a(),ue.hide()}).catch(function(i){console.error(i.message),ue.hide()})}function Ma(s,e,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},d=t().get(s,["target","files",0])||t().get(s,["dataTransfer","files",0])||t().get(this,["file","files",0]);e==null||e.getJSON(d).then(function(u){ce(e==null?void 0:e.url,{method:"post",data:u,headers:r()({},l)}).then(function(){Ce.success({title:"\u64CD\u4F5C\u6210\u529F"}),a()}).catch(function(i){console.error(i.message)})}).catch(function(u){u.message&&He.ZP.warn(u.message)})}var La=/\{.*\}/g,_a=function(e){var a,l,d,u,i,g,S,m,y,F,A,h,b,R,x,v,D,$,U,B,k,L,W,f,P,N,T,O,G,Q,J,Y,ae,V,X,ee,q,ve,ie,Se,le,Ae,Ze,E=e.data,sn=e.style,tn=(0,Oe.TH)(),ze=t().get(tn,["query"]),Fe=(E==null?void 0:E.mapping)||{},Re=(0,c.useRef)(null),ne=(0,c.useRef)(null),te=(0,c.useRef)(null),me=(0,c.useState)(Gn),se=H()(me,2),Ge=se[0],We=se[1],cn=(0,c.useState)({}),on=H()(cn,2),Me=on[0],Je=on[1],Ie=(0,c.useState)(!1),Dn=H()(Ie,2),Yn=Dn[0],Tn=Dn[1],Kn=function(){var K,ge=t().get(fn,"action.init",function(){}),je=ne==null||(K=ne.current)===null||K===void 0?void 0:K.getValues();ge(je),Je(r()({},je)),Tn(!0)},Fn=E==null||(a=E.component)===null||a===void 0?void 0:a.field,Xn=E==null||(l=E.component)===null||l===void 0?void 0:l.url.replaceAll(La,t().get(ze,[Fn])),Qn=E==null||(d=E.component)===null||d===void 0?void 0:d.path,vn=E==null||(u=E.component)===null||u===void 0?void 0:u.pagePath,qn=E==null||(i=E.component)===null||i===void 0||(g=i.value)===null||g===void 0||(S=g.tableConfig)===null||S===void 0?void 0:S.columns,et=E==null||(m=E.component)===null||m===void 0||(y=m.value)===null||y===void 0||(F=y.tableConfig)===null||F===void 0?void 0:F.childTable,nt=E==null||(A=E.component)===null||A===void 0||(h=A.value)===null||h===void 0||(b=h.tableConfig)===null||b===void 0?void 0:b.rowSelect,fn=E==null||(R=E.component)===null||R===void 0||(x=R.value)===null||x===void 0||(v=x.formConfig)===null||v===void 0?void 0:v.schema,Rn=E==null||(D=E.component)===null||D===void 0||($=D.value)===null||$===void 0||(U=$.formConfig)===null||U===void 0?void 0:U.widgets,z=E==null||(B=E.component)===null||B===void 0||(k=B.value)===null||k===void 0||(L=k.formConfig)===null||L===void 0?void 0:L.addBtn,hn=E==null||(W=E.component)===null||W===void 0||(f=W.value)===null||f===void 0||(P=f.formConfig)===null||P===void 0?void 0:P.exportBtn,ye=E==null||(N=E.component)===null||N===void 0||(T=N.value)===null||T===void 0||(O=T.formConfig)===null||O===void 0?void 0:O.importBtn,mn=(0,c.useContext)(Ue),Bn=(E==null||(G=E.component)===null||G===void 0||(Q=G.value)===null||Q===void 0||(J=Q.formConfig)===null||J===void 0?void 0:J.extraBtns)||[],tt=E==null||(Y=E.component)===null||Y===void 0||(ae=Y.value)===null||ae===void 0||(V=ae.tableConfig)===null||V===void 0?void 0:V.operate,Ye=E==null||(X=E.component)===null||X===void 0||(ee=X.value)===null||ee===void 0||(q=ee.tableConfig)===null||q===void 0?void 0:q.rowConfig,ot=E==null||(ve=E.component)===null||ve===void 0||(ie=ve.value)===null||ie===void 0||(Se=ie.tableConfig)===null||Se===void 0?void 0:Se.needOrder,at=E==null||(le=E.component)===null||le===void 0||(Ae=le.value)===null||Ae===void 0||(Ze=Ae.tableConfig)===null||Ze===void 0?void 0:Ze.method,On=(0,Oe.s0)(),lt=(0,c.useContext)(we),Le=t().get(lt,"requestHeaders",{})||{},gn=function(){var K;ne==null||(K=ne.current)===null||K===void 0||K.validate().then(function(ge){var je;(!(ge!=null&&ge.errors)||!(ge!=null&&(je=ge.errors)!==null&&je!==void 0&&je.length))&&(t().set(ge,"___agul_ui_time____",new Date().getTime()),Je(t().pickBy(ge,function(be){return!t().isNil(be)})))}).catch(function(ge){console.log(ge)})},_e=function(){var K;ne==null||(K=ne.current)===null||K===void 0||K.resetFields(),Je({___agul_ui_time____:new Date().getTime()})},pn=function(){if(z!=null&&z.routerPath){On(z==null?void 0:z.routerPath);return}var K=function(){var je;te==null||(je=te.current)===null||je===void 0||je.validate().then(function(be){var ln;(be instanceof FormData||!(be!=null&&be.errors)||!(be!=null&&(ln=be.errors)!==null&&ln!==void 0&&ln.length))&&ce(z==null?void 0:z.url,{method:z!=null&&z.method?z==null?void 0:z.method:"post",data:be,headers:r()({},Le)}).then(function(){Ce.success({title:"\u64CD\u4F5C\u6210\u529F"}),We(Gn),_e()}).catch(function(Nn){console.error(Nn.message)})}).catch(function(be){console.error(be.message)})};We({title:z==null?void 0:z.text,open:!0,schema:z==null?void 0:z.schema,widgets:z==null?void 0:z.widgets,onSuccess:K,onCancel:function(){return We(Gn)},readonly:!1})},yn=function(){var K;Re==null||(K=Re.current)===null||K===void 0||K.click()},it=(0,c.useMemo)(function(){var fe,K;return E!=null&&(fe=E.component)!==null&&fe!==void 0&&fe.params?r()(r()({},E==null||(K=E.component)===null||K===void 0?void 0:K.params),Me):Me},[Me]),an=(0,Bt.Z)();return(0,o.jsxs)("div",{className:"agul-table-with-form-card",style:sn,children:[fn?(0,o.jsxs)("div",{className:"agul-table-with-form-box",children:[(0,o.jsx)("div",{className:"agul-table-form",children:(0,o.jsx)(Pe,{schema:fn,widgets:Rn,ref:ne,globalDataFeilds:Fe.form,onMount:Kn})}),(0,o.jsxs)("div",{className:"agul-table-with-operate-box",id:an,children:[(0,o.jsx)(de.Z,{onClick:function(){return gn()},children:"\u67E5\u8BE2"}),z?(0,o.jsx)(de.Z,r()(r()({type:"primary",onClick:pn},z==null?void 0:z.props),{},{children:(z==null?void 0:z.text)||"\u65B0\u5EFA"})):null,ye?(0,o.jsx)(de.Z,r()(r()({type:"primary",onClick:function(){return yn()}},ye==null?void 0:ye.props),{},{children:(ye==null?void 0:ye.text)||"\u5BFC\u5165"})):null,t().map(Bn,function(fe){return typeof fe=="string"?mn&&mn[fe]?(0,c.createElement)(mn[fe],{reset:_e,upDate:gn}):fe:typeof fe=="function"?(0,c.createElement)(fe,{reset:_e,upDate:gn}):null})]})]}):null,Yn?(0,o.jsx)(Un,{rowKey:"id",url:Xn,params:it,columns:qn,operate:tt,rowConfig:Ye,path:Qn,pagePath:vn,rowSelect:nt,childTable:et,needOrder:ot,method:at,tableOperateBoxId:an,tableExportBoxId:an,exportBtn:hn}):null,(0,o.jsx)(wn,r()(r()({},Ge),{},{ref:te})),(0,o.jsx)("input",{type:"file",style:{display:"none"},ref:Re,onChange:function(K){return(ye==null?void 0:ye.dataType)==="json"?Ma(K,ye,_e,Le):Wa(K,ye==null?void 0:ye.url,_e,Le)}})]})},Ha=_a,li=p(99558),An=p(88437),ka=An.Z.TabPane,Ua=function(e){var a,l=e.data,d=l===void 0?[]:l,u=e.style;return(0,o.jsx)("div",{className:"agul-tabs-card",style:u,children:(0,o.jsx)(An.Z,{defaultActiveKey:"0",children:t().map(d==null||(a=d.component)===null||a===void 0?void 0:a.value,function(i,g){return(0,o.jsx)(ka,{tab:i==null?void 0:i.title,children:Wt(i)},"".concat(g))})})})},Va=Ua,za=function(e){var a,l,d,u,i,g,S,m,y,F,A,h,b,R,x,v,D,$=e.data,U=e.style,B=(0,c.useContext)(Ue),k=(0,c.useState)({}),L=H()(k,2),W=L[0],f=L[1],P=function(O){f(O)},N=De()(t().map(($==null||(a=$.component)===null||a===void 0||(l=a.value)===null||l===void 0?void 0:l.extraBtns)||[],function(T){return typeof T=="string"?B&&B[T]?(0,c.createElement)(B[T],{data:W}):T:typeof T=="function"?(0,c.createElement)(T,{data:W}):null}));return(0,o.jsx)("div",{className:"agul-detail-card",style:U,children:(0,o.jsx)(Ft,{url:$==null||(d=$.component)===null||d===void 0?void 0:d.url,path:$==null||(u=$.component)===null||u===void 0?void 0:u.path,dataSource:$==null||(i=$.component)===null||i===void 0||(g=i.value)===null||g===void 0?void 0:g.dataSource,field:$==null||(S=$.component)===null||S===void 0?void 0:S.field,names:$==null||(m=$.component)===null||m===void 0||(y=m.value)===null||y===void 0?void 0:y.names,enums:$==null||(F=$.component)===null||F===void 0||(A=F.value)===null||A===void 0?void 0:A.enums,tableConfig:$==null||(h=$.component)===null||h===void 0||(b=h.value)===null||b===void 0?void 0:b.tableConfig,objectConfig:$==null||(R=$.component)===null||R===void 0||(x=R.value)===null||x===void 0?void 0:x.objectConfig,init:$==null||(v=$.component)===null||v===void 0||(D=v.value)===null||D===void 0?void 0:D.init,extraButtons:N,getDetailValue:P})})},Ga=za,Ja=p(84031),Ya=function(e){var a=e.option,l=e.getOption,d=e.url,u=d===void 0?"":d,i=e.path,g=i===void 0?"data":i,S=e.method,m=S===void 0?"get":S,y=e.params,F=y===void 0?{}:y,A=e.formConfig,h=A===void 0?{}:A,b=(0,c.useState)(a||{}),R=H()(b,2),x=R[0],v=R[1],D=(0,c.useState)(!1),$=H()(D,2),U=$[0],B=$[1],k=(0,c.useContext)(we),L=t().get(k,"requestHeaders",{})||{},W=function(){var O=In()(Ke()().mark(function G(Q){var J,Y;return Ke()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return J=m==="get"?{params:Q}:{data:Q},V.prev=1,B(!0),V.next=5,ce(u,r()(r()({method:m},J),{},{headers:r()({},L)}));case 5:Y=V.sent,B(!1),setTimeout(function(){var X=t().get(Y,g,[]);if(t().isEmpty(X)){var ee=t().get(l(X),"title.text")||"",q={text:ee,subtext:"\u6682\u65E0\u6570\u636E",subtextStyle:{fontSize:16,align:"cenetr",verticalAlign:"middle"}};v({title:q,grid:{width:"100%",height:"100%"}})}else v(l(X))},0),V.next=14;break;case 10:V.prev=10,V.t0=V.catch(1),B(!1),console.error(V.t0.message);case 14:case"end":return V.stop()}},G,null,[[1,10]])}));return function(Q){return O.apply(this,arguments)}}();(0,c.useEffect)(function(){u&&W(F)},[u]);var f=h==null?void 0:h.schema,P=h==null?void 0:h.widgets,N=h==null?void 0:h.style,T=function(G){W(r()(r()({},F),t().pickBy(G,function(Q){return!t().isNil(Q)})))};return(0,o.jsxs)("div",{style:{height:"100%"},children:[f?(0,o.jsx)("div",{style:r()({width:300,position:"absolute",top:14,right:14,zIndex:10},N),children:(0,o.jsx)(Pe,{schema:f,widgets:P,onChange:t().debounce(T,200)})}):null,U?(0,o.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,o.jsx)(At.Z,{})}):(0,o.jsx)(Ja.Z,{option:x,notMerge:!0})]})},It=Ya,Ka=An.Z.TabPane,Xa=function(e){var a=e.multiple,l=a===void 0?!1:a,d=e.multipleConfig,u=d===void 0?[]:d,i=e.option,g=e.getOption,S=e.url,m=S===void 0?"":S,y=e.path,F=y===void 0?"data":y,A=e.method,h=A===void 0?"get":A,b=e.params,R=b===void 0?{}:b,x=e.formConfig,v=x===void 0?{}:x;return(0,o.jsx)("div",{className:"agul-chart-container",children:l?(0,o.jsx)(An.Z,{defaultActiveKey:"0",children:t().map(u,function(D){return(0,o.jsx)(Ka,{tab:D==null?void 0:D.title,children:(0,o.jsx)(It,r()({},D))},"".concat(D==null?void 0:D.title))})}):(0,o.jsx)(It,{option:i,getOption:g,url:m,path:F,method:h,params:R,formConfig:v})})},Qa=Xa,qa=function(e){var a,l,d,u,i,g,S,m,y,F,A,h,b,R,x=e.data,v=e.style;return(0,o.jsx)("div",{className:"agul-chart-card",style:v,children:(0,o.jsx)(Qa,{url:x==null||(a=x.component)===null||a===void 0?void 0:a.url,method:x==null||(l=x.component)===null||l===void 0?void 0:l.method,params:x==null||(d=x.component)===null||d===void 0?void 0:d.params,path:x==null||(u=x.component)===null||u===void 0?void 0:u.path,multiple:x==null||(i=x.component)===null||i===void 0||(g=i.value)===null||g===void 0?void 0:g.multiple,multipleConfig:x==null||(S=x.component)===null||S===void 0||(m=S.value)===null||m===void 0?void 0:m.multipleConfig,option:x==null||(y=x.component)===null||y===void 0||(F=y.value)===null||F===void 0?void 0:F.option,formConfig:x==null||(A=x.component)===null||A===void 0||(h=A.value)===null||h===void 0?void 0:h.formConfig,getOption:x==null||(b=x.component)===null||b===void 0||(R=b.value)===null||R===void 0?void 0:R.getOption})})},el=qa,ii=p(62216),nl=p(88306),tl=p(93812);function Pt(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=[];return t().forEach(s,function(l){l.id=l==null?void 0:l.key,l!=null&&l.children?(a=[].concat(De()(a),De()(Pt(l==null?void 0:l.children,e))),delete l.chidren):e.includes(l==null?void 0:l.key)&&(a=[].concat(De()(a),[l]))}),a}var ol=function(e){var a=e.data,l=e.style,d=Wn(),u=Mn(),i=t().get(a,"mapping",{}),g=t().get(a,"component.url"),S=t().get(a,"component.path"),m=t().get(a,"component.params",{}),y=t().get(a,"component.value.formConfig.schema"),F=t().get(a,"component.value.formConfig.widgets"),A=t().get(a,"component.value.treeConfig.labelFeild"),h=t().get(a,"component.value.treeConfig.valueFeild"),b=t().get(a,"component.value.treeConfig.max"),R=(0,c.useState)([]),x=H()(R,2),v=x[0],D=x[1],$=(0,c.useState)(!0),U=H()($,2),B=U[0],k=U[1],L=(0,c.useContext)(we),W=t().get(L,"requestHeaders",{})||{},f=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t().isEmpty(O)||(ue.show(),ce(g,{method:"get",params:r()(r()({},m),t().pickBy(O)),headers:r()({},W)}).then(function(G){ue.hide(),u(function(J){return r()(r()({},J),{},$e()({},i.tree,[]))});var Q=t().get(G,S,[]);D(Ln(Q,A,h)),k(!1),setTimeout(function(){k(!0)},0)}).catch(function(G){console.error(G.message),ue.hide(),D([])}))},P=(0,c.useMemo)(function(){var T={};return t().forEach(i.form,function(O){t().get(d,O)&&t().set(T,O,t().get(d,O))}),T},[i.form,d]);(0,tl.Z)(function(){D([]);var T=t().pickBy(P||{});f(T)},[P]);var N=function(O,G){var Q=G.node.children,J=t().map(Pt(v,O),function(Y){return Y==null?void 0:Y.uid});if(b<J.length){Q?(t().get(d,[i.tree,"length"],0)===b?He.ZP.info("\u6700\u591A\u53EF\u9009".concat(b,"\u6761\u4FE1\u53F7,\u8BF7\u53D6\u6D88\u52FE\u9009\u5176\u5B83\u4FE1\u53F7\u540E\u518D\u9009\u62E9\u8BE5\u4FE1\u53F7!")):He.ZP.info("\u6700\u591A\u53EF\u9009".concat(b,"\u6761\u4FE1\u53F7,\u5DF2\u81EA\u52A8\u5220\u51CF!")),u(function(Y){return r()(r()({},Y),{},$e()({},i.tree,J.slice(0,b)))})):He.ZP.info("\u6700\u591A\u53EF\u9009".concat(b,"\u6761\u4FE1\u53F7,\u8BF7\u53D6\u6D88\u52FE\u9009\u5176\u5B83\u4FE1\u53F7\u540E\u518D\u9009\u62E9\u8BE5\u4FE1\u53F7!"));return}u(function(Y){return r()(r()({},Y),{},$e()({},i.tree,J))})};return(0,o.jsxs)("div",{className:"agul-tree-with-form",style:l,children:[(0,o.jsx)("div",{className:"agul-tree-with-form-box",children:(0,o.jsx)(Pe,{schema:y,globalDataFeilds:i.form,widgets:F})}),B?(0,o.jsx)(nl.Z,{checkable:!0,height:600,defaultExpandAll:!0,checkedKeys:t().get(d,i.tree,[]),selectable:!1,onCheck:N,treeData:v}):null]})},al=ol,ri=p(32272),ll=p(69309),Jn=/\{.*\}/g,il=function(e){var a,l,d,u,i,g,S,m,y,F,A,h=e.data,b=e.style,R=(0,Oe.s0)(),x=(0,c.useState)(0),v=H()(x,2),D=v[0],$=v[1],U=(0,c.useState)({}),B=H()(U,2),k=B[0],L=B[1],W=(h==null?void 0:h.mapping)||{},f=h==null||(a=h.component)===null||a===void 0?void 0:a.url,P=h==null||(l=h.component)===null||l===void 0?void 0:l.method,N=h==null||(d=h.component)===null||d===void 0?void 0:d.field,T=h==null||(u=h.component)===null||u===void 0?void 0:u.path,O=(h==null||(i=h.component)===null||i===void 0||(g=i.value)===null||g===void 0?void 0:g.schemas)||[],G=h==null||(S=h.component)===null||S===void 0||(m=S.value)===null||m===void 0?void 0:m.widgets,Q=(0,Oe.TH)(),J=t().get(Q,["query"]),Y=h==null||(y=h.component)===null||y===void 0||(F=y.value)===null||F===void 0||(A=F.detailUrl)===null||A===void 0?void 0:A.replaceAll(Jn,t().get(J,[N])),ae=Jn.test(f)?f.replaceAll(Jn,t().get(J,[N])):f,V=(0,c.useContext)(we),X=t().get(V,"requestHeaders",{})||{};(0,c.useEffect)(function(){Y&&(ue.show(),ce(Y,{method:"get",headers:r()({},X)}).then(function(q){ue.hide();var ve=t().get(q,T);ve&&L(ve)}).catch(function(q){ue.hide(),console.error(q.message)}))},[Y]);var ee=function(ve,ie,Se){ie&&ie.length||(L(function(le){return r()(r()({},le),ve)}),Se?(ue.show(),ce(ae,{method:P||(Y?"put":"post"),data:r()(r()({},k),ve),headers:r()({},X)}).then(function(){Ce.success({title:"\u64CD\u4F5C\u6210\u529F"}),ue.hide(),R(-1)}).catch(function(le){ue.hide(),console.error(le.message)})):$(function(le){return le+1}))};return(0,o.jsxs)("div",{className:"agul-steps-form-card",style:b,children:[(0,o.jsx)(ll.Z,{current:D,items:t().map(O,function(q){var ve=q.stepName;return{title:ve}}),style:{marginBottom:"24px"}}),(0,o.jsx)(Pe,{schema:O[D],formData:k,onSubmit:function(ve,ie){return ee(ve,ie,t().isEqual(D,O.length-1))},widgets:G,submitText:t().isEqual(D,O.length-1)?"\u63D0\u4EA4":"\u4E0B\u4E00\u6B65",onCancel:function(){return R(-1)},globalDataFeilds:W.form,extraButtons:[(0,o.jsx)(de.Z,{disabled:!D,onClick:function(){$(function(ve){return ve-1})},children:"\u4E0A\u4E00\u6B65"})]})]})},rl=il,dl=function(e){var a,l,d=e.data,u=e.style,i=(0,c.useContext)(Ue),g=d==null||(a=d.component)===null||a===void 0?void 0:a.widget,S=(d==null||(l=d.component)===null||l===void 0?void 0:l.props)||{};return(0,o.jsx)("div",{className:"agul-custom-card",style:u,children:typeof g=="string"?i&&i[g]?(0,c.createElement)(i[g],S):g:typeof g=="function"?(0,c.createElement)(g,S):null})},ul=dl,sl=function(e,a){var l={position:a===Qe?"absolute":"static",height:a===Qe?"100%":"auto"},d={data:e,style:l};return(e==null?void 0:e.cardType)==="form"?(0,o.jsx)(Ra,r()({},d)):(e==null?void 0:e.cardType)==="video"?(0,o.jsx)(Oa,r()({},d)):(e==null?void 0:e.cardType)==="map"?(0,o.jsx)(Za,r()({},d)):(e==null?void 0:e.cardType)==="falls-list"?(0,o.jsx)(Pa,r()({},d)):(e==null?void 0:e.cardType)==="form-table"?(0,o.jsx)(Ha,r()({},d)):(e==null?void 0:e.cardType)==="tabs"?(0,o.jsx)(Va,r()({},d)):(e==null?void 0:e.cardType)==="detail"?(0,o.jsx)(Ga,r()({},d)):(e==null?void 0:e.cardType)==="form-tree"?(0,o.jsx)(al,r()({},d)):(e==null?void 0:e.cardType)==="steps-form"?(0,o.jsx)(rl,r()({},d)):(e==null?void 0:e.cardType)==="chart"?(0,o.jsx)(el,r()({},d)):(e==null?void 0:e.cardType)==="custom"?(0,o.jsx)(ul,r()({},d)):null},Wt=sl,cl=function(e){var a=e.data,l=e.layoutType,d=c.useRef(),u=c.useState({min:!1,style:{borderWidth:a.border+"px"}}),i=H()(u,2),g=i[0],S=i[1],m=c.useState(!0),y=H()(m,2),F=y[0],A=y[1];return F?(0,o.jsxs)("div",{className:"agul-card-wrapper",children:[g.min?(0,o.jsx)(de.Z,{onClick:function(){S(function(b){return r()(r()({},b),{},{min:!1,style:r()(r()({},b.style),{},{transform:"scale(1)"})})})},children:"show"}):(0,o.jsxs)("div",{className:"agul-card-operation",children:[a.close?(0,o.jsx)(Aa.Z,{onClick:function(){return A(!1)}}):null,a.max?(0,o.jsx)(Da.Z,{onClick:function(){d.current.requestFullscreen()}}):null,a.min?(0,o.jsx)(Ta.Z,{onClick:function(){S(function(b){return r()(r()({},b),{},{min:!0,style:r()(r()({},b.style),{},{transform:"scale(0)"})})})}}):null]}),(0,o.jsx)("div",{className:"agul-card-content",style:r()(r()({},g.style),{},{position:l===Qe?"absolute":"static",height:l===Qe?"100%":"auto"}),ref:d,children:Wt(a,l)})]}):null},Mt=cl,vl=(0,Zt.WidthProvider)(Zt.Responsive),fl=function(e){var a,l,d=e.data,u=e.hasGlobalSize,i=(0,c.useRef)(null),g=(0,c.useRef)(null),S=Mn();(0,c.useEffect)(function(){var h=new ResizeObserver(t().debounce(function(){var b;i==null||(b=i.current)===null||b===void 0||b.onWindowResize(),u&&S(function(R){return r()(r()({},R),{},{SIZE:{}})})},50));h.observe(g==null?void 0:g.current)},[]);var m=(d==null||(a=d.layout)===null||a===void 0?void 0:a.type)||Qe,y=t().map(d==null||(l=d.layout)===null||l===void 0?void 0:l.value,function(h,b){return t().set(h,"i",String(b)),h}),F={lg:y,md:y,sm:y,xs:y,xxs:y},A=t().map((d==null?void 0:d.values)||[],function(h,b){return t().set(h,"key",t().get(y,[b,"i"])),h});return(0,o.jsx)("div",{ref:g,children:m===Qe?(0,o.jsx)(vl,{className:"layout",layouts:F,isDraggable:!1,isResizable:!1,breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:24,md:24,sm:24,xs:24,xxs:24},rowHeight:50,ref:i,children:t().map(A,function(h){return(0,o.jsx)("div",{children:(0,o.jsx)(Mt,{data:h,layoutType:m},h.key)},h.key)})}):(0,o.jsx)("div",{children:(0,o.jsx)(dt.Z,{gutter:[10,10],style:{width:"100%"},children:t().map((d==null?void 0:d.values)||[],function(h,b){var R;return(0,o.jsx)(ut.Z,r()(r()({},t().get(d==null||(R=d.layout)===null||R===void 0?void 0:R.value,[b],{})),{},{children:(0,o.jsx)(Mt,{data:h,layoutType:m},h.key)}))})})})})},hl=fl,ml=function(e){var a=e.cards,l=a===void 0?[]:a,d=e.routes,u=e.hasGlobalTime,i=e.hasGlobalSize,g=Mn(),S=(0,c.useRef)(0);(0,c.useEffect)(function(){return u&&(S.current=setInterval(function(){g(function(h){return r()(r()({},h),{},{TIME:new Date().getTime()})})},2e3)),function(){clearInterval(S.current)}},[]);var m=(0,c.useState)(!1),y=H()(m,2),F=y[0],A=y[1];return(0,c.useEffect)(function(){setTimeout(function(){A(!0)})},[]),(0,o.jsx)(c.Suspense,{fallback:(0,o.jsx)("div",{children:"Loading..."}),children:(0,o.jsxs)("div",{className:"agul-page-container-content",children:[t().isEmpty(d)?null:(0,o.jsx)(Nt,{routes:d||[]}),F?(0,o.jsx)(hl,{data:l,hasGlobalSize:i}):null]})})},gl=function(e){var a,l,d=e.data,u=e.widgets;return(0,o.jsx)("div",{className:"agul-page-container",children:(0,o.jsx)(go,{data:d==null?void 0:d.pageData,children:(0,o.jsx)(Ue.Provider,{value:u,children:(0,o.jsx)(ml,{cards:d==null?void 0:d.cards,routes:d==null?void 0:d.routes,hasGlobalTime:!!(d!=null&&(a=d.pageData)!==null&&a!==void 0&&a.TIME),hasGlobalSize:!!(d!=null&&(l=d.pageData)!==null&&l!==void 0&&l.SIZE)})})})})},pl=gl},24654:function(){},18685:function(){},20067:function(){},55382:function(){},72095:function(){},61219:function(){}}]);
